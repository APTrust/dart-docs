{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to DART","text":"<p>DART is the Digital Archivist's Resource Tool. It provides both a GUI and a command-line interface for packaging files and uploading them to remote repositories.</p>"},{"location":"#download","title":"Download","text":"<p>Updated March 14, 2023</p> <p>Download the DART installer for your system. The current version is 2.0.22 (released March 14, 2023).</p> <p>Mac: https://s3.amazonaws.com/aptrust.public.download/DART/DART-2.0.22.dmg</p> <p>Windows: https://s3.amazonaws.com/aptrust.public.download/DART/DART+Setup+2.0.22.exe</p> <p>Linux: https://s3.amazonaws.com/aptrust.public.download/DART/DART_2.0.22_amd64.deb</p> <p>Double-click the installer after download and follow the prompts on screen.</p> <p>For DART Runner, see DART Runner Downloads</p> <p>After installation, check out the Getting Started page</p>"},{"location":"#supported-operations","title":"Supported Operations","text":"<p>The current release of DART 2.0.22 supports the following features:</p> <ul> <li>Creating BagIt bags that conform to defined BagIt profiles</li> <li>Validating BagIt bags according to defined BagIt profiles</li> <li>Uploading bags and other files to remote S3 and SFTP endpoints</li> <li>Creating and modifying BagIt profiles through a visual point-and-click editor</li> <li>Defining repeatable Workflows for bagging and uploading files</li> <li>Running multiple simultaneous bagging and upload jobs</li> <li>Read-only integration with the APTrust's REST API to display the status of ingested materials and pending work items</li> <li>A command-line tool to enable scriptable bagging and upload operations</li> <li>BagIt Profile import and export</li> <li>BagIt Profile customization throug a visual editor</li> <li>Settings import and export</li> <li>Workflow export</li> </ul> <p>To start using DART, see our Getting Started page.</p> <p>Note</p> <p>We recently released DART Runner to run workflows on servers that have no graphical environment. For more info, see DART Runner.</p>"},{"location":"#plugin-architecture","title":"Plugin Architecture","text":"<p>Most of DART's features are implemented in plugins, which enable developers to add new features without having to understand all of DART's internals. DART is an open source project of the Academic Preservation Trust, which encourages developers to contribute new plugins to extend the tool's functionality.</p> <p>DART 2.0 supports the following types of plugins:</p> <ol> <li> <p>Format Readers - These allow DART to read files packaged in various formats, such as tar, zip, rar, parchive, OCFL, etc. Currently supported in formats in version 2.0:</p> <ol> <li>directory/file system</li> <li>tar</li> </ol> </li> <li> <p>Format Writers - These allow DART to write files in various formats, such as tar, zip, rar, parchive, OCFL, etc. Currently supported in formats in version 2.0:</p> <ol> <li>directory/file system</li> <li>tar</li> </ol> </li> <li> <p>Network Clients - These allow DART to send and retrieve files across a network. DART 2.0 supports the following protocols:</p> <ol> <li>S3</li> <li>SFTP</li> </ol> </li> <li> <p>Repository Clients - These allow DART to interact with remote repositories. Currently supported:</p> <ol> <li>APTrust</li> </ol> </li> </ol> <p>Writing DART plugins requires a working knowledge of JavaScript and HTML. If you're interested in developing DART plugins, see our Developers page and our full API documentation.</p>"},{"location":"#dart-user-group","title":"DART User Group","text":"<p>APTrust hosts a DART User Group for the entire digital preservation community. This group will primarily be a mailing list, where users can share experiences, ask questions, and support one another. Depending on the level of interest and engagement, we may expand this initiative to include regular virtual meetings and more structured activities in the future.</p>"},{"location":"#useful-links","title":"Useful Links","text":"<p>Getting Started with DART</p> <p>Developing DART Plugins</p> <p>DART API documentation</p> <p>DART source code on GitHub</p> <p>Video: Jobs and Workflows</p> <p>Video: BagIt Profiles in DART</p> <p>Video: Settings Import and Export</p>"},{"location":"#credits","title":"Credits","text":"<p>Brace yourselves gentlemen. According to the gas chromatograph, the secret ingredient is... Love!?</p> <p></p> <p>Who's been screwing with this thing?</p>"},{"location":"download/","title":"Download","text":"<p>Updated March 14, 2023</p> <p>Download the DART installer for your system. The current version is 2.0.22 (released March 14, 2023).</p> <p>Mac: https://s3.amazonaws.com/aptrust.public.download/DART/DART-2.0.22.dmg</p> <p>Windows: https://s3.amazonaws.com/aptrust.public.download/DART/DART+Setup+2.0.22.exe</p> <p>Linux: https://s3.amazonaws.com/aptrust.public.download/DART/DART_2.0.22_amd64.deb</p> <p>Double-click the installer after download and follow the prompts on screen.</p> <p>For DART Runner, see DART Runner Downloads</p> <p>After installation, check out the Getting Started page</p>"},{"location":"videos/","title":"DART Videos","text":""},{"location":"videos/#jobs-and-workflows","title":"Jobs and Workflows","text":"<p>This video covers:</p> <ul> <li>How to set up and run a job.</li> <li>How to create a workflow to build and upload lots of bags.</li> </ul>"},{"location":"videos/#working-with-bagit-profiles","title":"Working with BagIt Profiles","text":"<p>This video covers:</p> <ul> <li>How to import a BagIt profile.</li> <li>How to customize a BagIt profile using the visual editor.</li> <li>How to export a BagIt profile.</li> </ul>"},{"location":"videos/#importing-and-exporting-settings","title":"Importing and Exporting Settings","text":"<p>This video covers:</p> <ul> <li>How to export settings to share with other users.</li> <li>How to import settings shared by other users.</li> </ul>"},{"location":"developers/","title":"Developer's Guide to DART","text":"<p>DART's primary purpose is to pack and ship digital materials for preservation. It includes a GUI for non-technical users who want to drag and drop files, and a command line interface for more technical users who want to script DART jobs.</p> <p>While DART's initial release supports the BagIt packaging format and uploads to S3-compatible services, future users may require additional package formats such as rar, parchive, OCFL, etc. They may also need to ship files using network protocols such as SFTP, rsync, scp and others.</p> <p>DART has a plugin architecture that allows developers to contribute code that will add these package formats and network protocols. If you know how to write JavaScript, you can contribute plugins without having to understand DART's internals.</p> <p>If you're interested in a deep dive, checkout DART's full API documentation.</p>"},{"location":"developers/#getting-the-code","title":"Getting the Code","text":"<p>To get started developing DART plugins, download the source from GitHub.</p> <pre><code>git clone https://github.com/APTrust/dart.git\n</code></pre> <p>Once you have the source, you'll need to install the dependencies. Change into the dart directory and run this:</p> <pre><code>npm install\n</code></pre> <p>To ensure all is working, run the tests.</p> <pre><code>npm test -- --runInBand\n</code></pre>"},{"location":"developers/#useful-links","title":"Useful Links","text":"<p>Writing Plugins for DART</p> <p>Building DART Installers</p> <p>DART API Documentation</p> <p>DART source on GitHub</p>"},{"location":"developers/architecture/","title":"Architecture","text":"<p>DART was designed around a few core principles.</p> <ol> <li> <p>It should use commonly available and well understood open source technologies.</p> </li> <li> <p>It should run on Windows, Mac, and Linux.</p> </li> <li> <p>It should include a plugin architecture so developers can add new features and functions without having to learn the system's internals.</p> </li> <li> <p>It should separate core functional code from UI code, so the application's core features can be run from the UI or from the command line.</p> </li> <li> <p>Components should be as loosely coupled as possible so that:</p> <ol> <li>They can be replaced at will, and so</li> <li>They don't cause bugs in other components.</li> </ol> </li> <li> <p>All components should be implemented in the simplest way possible. This means:</p> <ol> <li>Don't add extraneous JavaScript libraries just to pick up one or two handy functions.</li> <li>Don't do in JavaScript what the browser already does for you (such as navigation and making decisions about rendering).</li> <li>Don't use libraries like React, Angular, Vue, etc. (because DART's HTML is so simple, these libraries would only add complexity without adding value).</li> </ol> </li> <li> <p>DART should be maintainable for the long term. In practice, this goes beyond architectural principles to include two ongoing practices to accompany all new and updated code:</p> <ol> <li>Thorough testing.</li> <li>Complete and useful documentation.</li> </ol> </li> </ol>"},{"location":"developers/architecture/#tech-stack","title":"Tech Stack","text":"<p>DART is built on the following tech stack:</p> <ul> <li> <p>Electron, which provides a cross-platform UI as well as build and distribution capabilities.</p> </li> <li> <p>Node.js, which provides a portable JavaScript runtime and a set of core libraries.</p> </li> <li> <p>HTML5, which provides simple interactive displays.</p> </li> <li> <p>Bootstrap 4, which provides a rich and flexible CSS framework.</p> </li> <li> <p>Handlebars, a brain-dead templating language that forces you to separate logic from presentation.</p> </li> </ul>"},{"location":"developers/architecture/#mvc-pattern","title":"MVC Pattern","text":"<p>DART uses an MVC design pattern similar to Ruby on Rails. This choice was guided by the following considerations:</p> <ul> <li> <p>DART can route requests using standard URLs. There's no need for a routing engine, or for JavaScript to keep track of navigation history, the state of HTML components on the page, data mappings, a virtual DOM, etc.</p> </li> <li> <p>Each MVC request routes to one endpoint of one controller and the mapping is always obvious from the URL. For example, AppSetting/list maps to the list() method of the AppSetting controller.</p> </li> <li> <p>All request parameters are passed through the URL, so there's no need for special JavaScript classes, structures, or mappings.</p> </li> <li> <p>Each request results in a full re-rendering of the DOM. This is seen as an evil to be avoided in web applications because a page load requires one or more network calls and causes the user to lose state information and the dynamically loaded content that comes from infinite scrolling. DART does not need to make network calls to load pages, and because it keeps no state, there's nothing to lose. Because a typical DART page loads only 10-20 kilobytes of HTML, it renders quickly, taking advantage of all the browser's rendering optimizations.</p> </li> </ul>"},{"location":"developers/building/","title":"Building DART","text":"<p>Once you've cloned the DART source code from GitHub, there are two ways to build the application.</p> <ol> <li> <p><code>cd</code> into the DART project directory and run the command <code>./node_modules/.bin/electron-builder</code>. This will run a command-line build for your platform.</p> </li> <li> <p><code>cd</code> into the DART project directory and run the command <code>npm run electron-toolkit</code>. This will present a GUI that makes it easy to customize your build and to build DART for other platforms.</p> </li> </ol>"},{"location":"developers/data_storage/","title":"Data Storage","text":"<p>DART stores all of its settings data in plain text JSON files. You find these files in the DART data directory. Choose Help &gt; About from the DART menu to find the data directory on your system. You'll see a dialog like the following.</p> <p></p> <p>DART uses the simple conf module to read, write, and search data, and write-file-atomic to prevent write conflicts.</p> <p>If you want to dig further into DART's data persistence, see the documentation for JsonStore and PersistentObject.</p> <p>You can examine DART's data stores by opening the JSON files, or in the console by following these steps:</p> <ol> <li> <p>Open DART by running <code>npm start</code> from the DART project directory.</p> </li> <li> <p>Right click anywhere on the page and choose Inspect Element from the context menu.</p> </li> <li> <p>Swich to the Console view in the developer tools window.</p> </li> <li> <p>Type <code>DART.Core.Context.dataStores</code> in the console.</p> </li> </ol> <p></p>"},{"location":"developers/documenting/","title":"Documenting DART","text":"<p>If you contribute code to DART, please document it for the sanity of the people who will maintain it. DART uses JSDoc to generate the DART API documentation. Look at the source code for examples of how we use JSDoc.</p> <p>In addition to documenting your API methods, you should comment sections of your code in which the logic or behavior is not obvious.</p> <p>Always code as if the guy who ends up maintaining your code will be a violent psychopath who knows where you live. -- John F. Woods</p>"},{"location":"developers/job_flow/","title":"Job Flow","text":"<p>All DART jobs are run as individual processes. When you run a job from the DART UI, the application forks a child process and runs the job in that process. The code that forks the child is in the run method of the JobRunController, which is documented here.</p> <p>Forking child processes has a number of advantages over running jobs in the same process as the UI.</p> <ul> <li>You can run multiple jobs simultaneously.</li> <li>You can continue to use the UI while jobs run.</li> <li>A crashed job will not crash the UI.</li> </ul> <p>The downside of running jobs in child processes is that if you close the DART application, you kill all of the running jobs. This is why DART always displays a badge in the upper right corner when jobs are running.</p> <p></p> <p>All DART jobs, whether run from the UI or from the command line, are launched from the run() method of main.js, which does the following:</p> <ol> <li> <p>Calls the JobLoader to load the job.</p> <p>Info</p> <p>The JobLoader figures out whether you're passing in a Job object or some other type of object from which it can construct a job. You'll typically pass in JSON representing a lightweight JobParams object and the JobLoader will construct the job from that. The JobParams object simply names a set of files, a Workflow to pass them through, and a set of metadata tags to add to the package. The user documentaiton for JobParams will be helpful to developers.</p> </li> <li> <p>Passes the Job object to the JobRunner and then calls the JobRunner's run method.</p> </li> <li> <p>Returns the exit code so that the script or application that launched the job can know whether it succeeded. An exit code of zero indicates success. Any other code indicates failure. These codes are spelled out in core/constants.js as follows:</p> </li> </ol> <pre><code>    /**\n     * This exit code indicates a process completed successfully,\n     * with no errors.\n     *\n     * @type {number}\n     */\n    EXIT_SUCCESS: 0,\n    /**\n     * This exit code indicates a process ran to completion, but one\n     * or more errors occurred along the way.\n     *\n     * @type {number}\n     */\n    EXIT_COMPLETED_WITH_ERRORS: 1,\n    /**\n     * This exit code indicates a process did not complete\n     * due to invalid parameters.\n     *\n     * @type {number}\n     */\n    EXIT_INVALID_PARAMS: 2,\n    /**\n     * This exit code indicates that the process did not complete\n     * due to an unexpected runtime error.\n     *\n     * @type {number}\n     */\n     EXIT_RUNTIME_ERROR: 3,\n</code></pre>"},{"location":"developers/job_flow/#the-jobrunner-step-by-step","title":"The JobRunner, Step by Step","text":"<p>The JobRunner does the following:</p> <ol> <li> <p>If the Job includes a PackageOperation, the JobRunner packages the files specified in the operation. The PackageOperation describes how DART should create a bag, or a tar file, or a zip file, or some other package. If a user wants to upload files without packaging, there will be no PackageOperation.</p> </li> <li> <p>If the PackageOperation produced a BagIt bag (tarred or not), DART validates the bag. The JobRunner will create a ValidationOperation to describe what needs to be validated and how.</p> </li> <li> <p>If the job includes any UploadOperations, DART will execute them one at a time, in sequence.</p> </li> <li> <p>The JobRunner sets and returns the appropriate exit code. (Note that the most common cause of the EXIT_COMPLETED_WITH_ERRORS code is a job whose packaging and validation succeeded, along with some but not all of the upload operations.)</p> </li> </ol> <p>The JobRunner logs its work, and you can watch the operations unfold in the logs.</p> <p>Each of the objects PackageOperation, ValidationOperation, and UploadOperation include an OperationResult object.</p> <p>After a job is complete, each of the operations and their results are stored with the job record in the DART's jobs database, which is a plain text JSON file. You can open the file directly to examine the full state of the object. See Data Storage for more information.</p> <p>All of the code for running jobs lives in the workers folder of the DART source. The four key files have the following tasks:</p> <ul> <li> <p>workers/job_runner.js orchestrates the work of bagging, validating, and uploading. Links: source code, documentation, tests.</p> </li> <li> <p>workers/bag_creator.js creates bags for the PackageOperation step of the job. Links: source code, documentation, tests.</p> </li> <li> <p>workers/bag_validator.js validates that a bag is complete and conforms to a specified BagIt profile. Links: source, documentation, tests.</p> </li> <li> <p>workers/uploader.js uploads files to a remote upload target. Links: source, documentation, tests.</p> </li> </ul>"},{"location":"developers/logging/","title":"Logging","text":"<p>DART uses the Winston library for logging. You can find the location of your DART logs by choosing Help &gt; About from the main menu. You should see a dialog like this:</p> <p></p> <p>As you develop, you can tail the logs to see what's happening in real time. Just substitute the proper log location in the command below.</p> <pre><code>tail -f /Users/apd4n/Library/Logs/DART/dart.log\n</code></pre> <p>Also note that you can tail the logs directly from DART by choose Help &gt; Logs from the menu. While this approach is handy, there are two caveats. First, if the log file is large, the log window may take a long time to load. Second, DART rotates its logs when they reach a size of 5 MB. If that rollover happens while you're tailing the log in the DART log window, you won't see any entries logged after the rollover.</p> <p>DART logs to a different file when it runs unit tests, usually to a directory called <code>.dart-test/log/dart.log</code>. For more information on logging, see the code in util/logger.js and the config settings in core/config.js.</p>"},{"location":"developers/testing/","title":"Testing DART","text":"<p>DART uses Jest for testing. You can run DART's test suite with this command</p> <pre><code>npm test -- --runInBand\n</code></pre> <p>Note that the <code>--runInBand</code> option is required as a number of tests save fixture data to DART's disk-based data store. Because that data is globally accessible, tests must run in sequence to avoid deleting and overwriting data that other tests expect to be in a known state.</p>"},{"location":"developers/testing/#test-code-you-add","title":"Test Code You Add","text":"<p>If you're adding code to DART, please write tests to ensure your code behaves as expected.</p>"},{"location":"developers/plugins/","title":"Plugins","text":"<p>Plugins allow DART to read and write data formats (such as tar, zip, etc.), to upload and download files using various protocols (such as s3, ftp, etc.), to communicate with the REST APIs of remote repositories (such as APTrust) and to help users through the complexities of initial setup and configuration (such as the APTrust and DPN setup modules).</p> <p>DART plugins are written in plain JavaScript and HTML. Developers may contribute new plugins without having to learn DART's internals. A plugin simply has to conform to a simple API, which it typically limited to a small number of well-defined methods.</p> <p>The documentation in this section gives a high-level overview plugin structure and behavior as a starting point for developing your own plugins. You'll find more detail information in DART's API documentation and source code, as well as in the unit tests that accompany existing plugins. Along with an overview of each plugin type, this documentation provides relevant links to source and test code for further study.</p>"},{"location":"developers/plugins/#the-base-plugin","title":"The Base Plugin","text":"<p>DART's base Plugin object is simply an EventEmitter with a static method that returns a description. The description includes the following fields:</p> <ul> <li> <p>id - A UUID string that uniquely identifies the plugin. When writing a plugin, you should generate this once. It lives from then on as a hard-coded identifier.</p> </li> <li> <p>name - The name of the plugin. This will appear in parts of the DART UI that use the plugin.</p> </li> <li> <p>description - A description of what the plugin does.</p> </li> <li> <p>version - The plugin version, which is a string. E.g. '1.0.14'.</p> </li> <li> <p>readsFormats - A list of strings, this applies only to plugins that can read data from formats such as zip, tar, rar, parchive, etc. The values in this field should be the file extensions of the types of files the plugin can read. For example, ['.tar.', '.gz', '.gzip', '.tar.gz']. This should be empty for plugins that are not intended to read file formats. Use all lower case letters.</p> </li> <li> <p>writesFormats - A list of strings indicating the file formats the plugin can write. E.g. ['.tar.', '.gz', '.gzip', '.tar.gz']. This should be empty for plugins that are not intended to write file formats. Use all lower case letters.</p> </li> <li> <p>implementsProtocols - The network protocols that this plugin implements. For example, an FTP plugin may implement ['ftp', 'sftp', 'ftps']. This applies only to plugins of type NetworkClient. If your plugin is not a NetworkClient, this should be an empty list. Use all lower case letters.</p> </li> <li> <p>talksToRepository - This describes what type of repository your plugin talks to. For example, 'fedora', 'aptrust', etc. This applies only to plugins of type Repository. If your plugin is not a Repository plugin, this should be empty. Use all lower case letters.</p> </li> </ul> <p>The PluginManager uses these descriptions to tell the application what plugins are available and what capabilities they have.</p> <p>Plugins are EventEmitters. They can work synchronously or asynchronously, but they must emit a standard set of events to communicate with the UI (or the JobRunner, when DART runs in command-line mode).</p>"},{"location":"developers/plugins/#plugin-types","title":"Plugin Types","text":"<p>Format Readers read file formats, such as tar, zip, and anything else a developer might want.</p> <p>Format Writers write file formats.</p> <p>Network Clients provide methods for uploading and download via different network protocols.</p> <p>Repo Clients provide communication between DART and the REST APIs of remote repositories.</p> <p>The PluginManager provides methods for discovering and loading installed plugins.</p>"},{"location":"developers/plugins/format_readers/","title":"Format Readers","text":"<p>Format readers read file formats like tar, zip, OCFL, etc. Format readers provide methods for listing the contents of a directory or serialized file, and for reading individual files from the directory/file.</p> <p>The initial release of DART 2.0 includes two format readers: a FileSystemReader and a TarReader. Developers can use these two examples as references for how to write a format reader.</p>"},{"location":"developers/plugins/format_readers/#api-and-events","title":"API and Events","text":"<p>Format readers must extend the DART base Plugin and providing a description() method that returns meaningful PluginDescription information.</p> <p>Format readers must implement the following methods:</p> <ul> <li> <p>A constructor that takes a single parameter, which is the path to the file that the reader will read. (If the reader reads from a directory, such as an OCFL object, the path should point to a directory.)</p> </li> <li> <p>A static definition method that takes no parameters and returns a description of the plugin (as described in The Base Plugin).</p> </li> <li> <p>A read method that takes no parameters and emits events <code>entry</code>, <code>error</code>, and <code>end</code> (described below).</p> </li> <li> <p>A list method that takes no parameters and emits events <code>entry</code>, <code>error</code>, and <code>end</code> (described below).</p> </li> <li> <p>Property fileCount, a number that starts at zero and is incremented by one each time read or list emits an entry event for a file.</p> </li> <li> <p>Property dirCount, a number that starts at zero and is incremented by one each time read or list emits an entry event for a directory.</p> </li> <li> <p>Property byteCount, a number that starts at zero and is incremented by the number of bytes in a file each time read or list emits an entry event for a file.</p> </li> </ul> <p>The error event passes a JavaScript error object to registered listeners and causes DART to stop reading.</p> <p>The end event passes nothing to registered listeners and tells DART that the reader has finished with all entries.</p> <p>The entry event passes an object containing the relative path of the current file entry, a lightweight FileStat object, and in the case a of the read method, an open Readable stream so DART can read the contents of the file.</p> <p>Note</p> <p>DART uses its own simplified FileStat object instead of Node's built-in Stats object because format readers will often have to read from serialized formats that don't include all of the information you'd find in a Stats object. For example, tar and zip headers may exclude information about inode, blocksize, etc.  The FileStat object simply captures the essentials that are common across most formats.</p> <p>Tip</p> <p>In cases where a FormatReader's read method cannot return a readable stream, it can return a DummyReader. This is necessary in cases where the reader encounters a directory entry that cannot be read like a regular file. DART will still try to read from the readable stream in the entry event, and a DummyReader will allow DART to read without error. For an example of how to do this, look for DummyReader in the read method of the FileSystemReader source code.</p>"},{"location":"developers/plugins/format_readers/#format-reader-examples","title":"Format Reader Examples","text":"<p>The best way to understand how to write a FormatReader plugin is to review the API documentation, source code, and tests for the following:</p> <ul> <li> <p>FileSystemReader, which provides a working example.</p> </li> <li> <p>The FileSystemReader tests, which show how the reader is expected to behave.</p> </li> <li> <p>TarReader.</p> </li> <li> <p>The TarReader tests, which show how the TarReader is expected to behave.</p> </li> <li> <p>The FileStat documentation, which shows the structure of the FileStat object.</p> </li> </ul>"},{"location":"developers/plugins/format_writers/","title":"Format Writers","text":"<p>Format writers write file formats like tar, zip, OCFL, etc. Format writers provide methods for writing contents into a directory or serialized file. The initial release of DART 2.0 includes two format writers: a FileSystemWriter and a TarWriter. Developers can use these two examples as references for how to write a format writer.</p> <p>Format writers may be synchronous or asynchronous under the hood. Certain types of writers, such as the built-in TarWriter MUST be synchronous internally because the tar format requires files to be written one at a time, in order. To assist with this, the BaseWriter implements a queue that executes requests sequentially, in the order they were received, with each write request beginning only after the last write has completed.</p>"},{"location":"developers/plugins/format_writers/#api-and-events","title":"API and Events","text":"<p>Format writers should extend the DART BaseWriter and provide a description() method that returns meaningful PluginDescription information.</p> <p>Format writers must implement the following methods:</p> <ul> <li> <p>A constructor that takes a single parameter, which is the path to the file or directory that the reader will write.</p> </li> <li> <p>A static definition method that takes no parameters and returns a description of the plugin (as described in The Base Plugin).</p> </li> <li> <p>An add method that takes two parameters: a BagItFile and an options list of cryptographic hash algorithm names (such as 'md5', 'sha256', etc.). This method must emit a <code>fileAdded</code> event each time it writes a file into the target directory (or tar archive, zip archive, etc). Note that a BagItFile is a simple object with properties to denote the source path from which the file is copied, the destination path to which it should be copied, and some basic stats information that includes the file size. In the process of copying the file, the Format Writer should calculate the requested checksums and store them in the <code>checksums</code> hash of the BagItFile.</p> </li> </ul> <p>Format writers should fire the fileAdded event each time a file has been written. See the add method of FileSystemWriter or TarWriter to see when and how this occurs. The data passed by the fileAdded event includes the BagItFile that was just added and the percent complete of the overall write operation (i.e. number of bytes written divided by number of total bytes to be written).</p> <p>Format writers won't need to emit the error event on their own, unless some special circumstance warrents it. The BaseWriter emits this event, passing back a string showing the name of the file being written and the error message.</p> <p>Note</p> <p>The BaseWriter always emits the finish event immediately after emitting the error event. This is done on the assumption that there is no sense in continuing to write a failed, incomplete, or corrupt output file.</p> <p>Format writers don't need to emit the finish event. The BaseWriter takes care of that internally. This event does not pass any parameters.</p> <p>Note</p> <p>After emission of the finish event, you should be able to check the filesWritten property to get the number of files written. That number is updated by the BaseWriter's onFileWritten method. If you override that method, be sure your override calls super().</p>"},{"location":"developers/plugins/format_writers/#format-writer-queue-functions","title":"Format Writer Queue Functions","text":"<p>DART's BaseWriter uses a one-at-a-time queue to force sequential synchronous writes. The queue is an instance of async.queue, and it requires a function to be run on each item. The writeIntoArchive() functions in FileSystemWriter source and TarWriter source provide examples on how to write a function for the queue.</p> <p>Notice that in both format writers, the add() method sets up a hash containing data and functions, then passes that hash into the queue by calling <code>this._queue.push(data)</code>. The queue eventually hands that data structure off to writeIntoArchive(), which does some piping internally to calculate multiple checksums in a single write.</p>"},{"location":"developers/plugins/manager/","title":"Plugin Manager","text":"<p>DART's PluginManager provides methods that allow the application to discover and load plugins. DART uses the findById method to load individual plugins, and the following methods to discover available plugins:</p> <ul> <li> <p>getModuleCollection() - This returns information about plugins of a specified type, such as Repo Clients or Network Clients. The list of plugins returned by this method appears on some configuration screens. For example, when a user sets up a new StorageService, a list of available network clients appears so the user can choose which client/protocol should be used to communicate with that service.</p> </li> <li> <p>DART's JobRunner uses the methods canRead(), canWrite(), implementsProtocol(), talksTo(), and setsUp() to figure out which plugins to use to complete each operation within a job.</p> </li> </ul> <p>See also: PluginManager API, PluginManager source</p>"},{"location":"developers/plugins/network_clients/","title":"Network Clients","text":"<p>Network Clients allow DART to send and receive data using defined network protocols such as S3, FTP, etc. These clients should be able to do the following:</p> <ul> <li> <p>Use the information in a StorageService object to login to or authenticate with the remote service. StorageService objects include a URL, login name, password, and other information required for authentication.</p> </li> <li> <p>Upload files or data to the remote service (if the service supports upload).</p> </li> <li> <p>Download files or data from the remote service (if the service supports download).</p> </li> <li> <p>List files or objects in the remote service (if the service supports list operations).</p> </li> </ul> <p>Note DART 2.0.22 supports only S3 and SFTP uploads.</p>"},{"location":"developers/plugins/network_clients/#api-and-events","title":"API and Events","text":"<p>Network clients must implement the following:</p> <ul> <li> <p>A constructor that takes a StorageService object as its sole parameter.</p> </li> <li> <p>An upload method that takes two parameters, localPath and remotePath. This method uploads the file at localPath to the destination remotePath.</p> </li> <li> <p>A download method that takes two parameters, localPath and remotePath. This method downloads the file from remotePath to localPath.</p> </li> <li> <p>A list method whose parameters and return values are yet to be determined.</p> </li> </ul> <p>Warning</p> <p>The API for network client plugins is still in flux. We may add optional parameters to each of the methods above, and we may further define some as-yet undefined behaviors. We plan to flesh out the network client API as we add new clients.</p> <p>Network clients emit the following events:</p> <ul> <li> <p>start - Indicates an upload or download has started.</p> </li> <li> <p>status - Indicates the status of an upload or download operation.</p> </li> <li> <p>warning - Issued when a non-fatal error occurs, such as a network connection interruption. The client should retry operations that failed due to non-fatal errors.</p> </li> <li> <p>error - Issued when a fatal error occurs. Fatal errors include authentication failures, missing files, permission errors, and other problems you cannot reasonably expect to go away when you retry the operation.</p> </li> <li> <p>finish - Emitted when the upload/download is complete.</p> </li> </ul>"},{"location":"developers/plugins/network_clients/#the-transfer-object","title":"The Transfer Object","text":"<p>Network clients may internally use their own custom transfer object to keep track of the details of an upload or download operation. The structure of a custom transfer object is entirely up to the developer. The only requirement is that the object include a property called <code>result</code> of type OperationResult.</p> <p>DART doesn't care what network client's do under the hood, but it does care about the results of each operation. Those results should be stored in the OperationResult object, and that object should be made accessible to DART through the events listed above.</p>"},{"location":"developers/plugins/network_clients/#reference-implementation","title":"Reference Implementation","text":"<p>The only current reference implementation for a network client plugin is the S3Client. The S3Client tests will give you an idea of how the client is expected to behave.</p>"},{"location":"developers/plugins/repo_clients/","title":"Repository Clients","text":"<p>Repository clients communicate with the REST APIs of remote repositories such as APTrust, Fedora, etc. For safety, these clients should be limited to read operations, such as showing a list of ingested objects or a list of pending work items from a queue.</p>"},{"location":"developers/plugins/repo_clients/#api","title":"API","text":"<p>Repository clients should inherit from RepositoryBase. They must implement the following methods:</p> <ul> <li> <p>A constructor that takes a RemoteRepository object as its first parameter.</p> </li> <li> <p>A provides method that takes no parameters and returns a list of object describing what methods this object provides. Each of the described methods should return a promise that ultimately returns HTML to be displayed in the DART dashboard. See the APTrustClient for an example.</p> </li> <li> <p>A hasRequiredConnectionInfo method that takes no parameters and returns true or false to indicate whether the client's RemoteRepository object appears to have enough info to query the repository. If this returns false, the DART dashboard will skip its automatic attempt to connect to the repo.</p> </li> </ul>"},{"location":"developers/plugins/repo_clients/#report-templates","title":"Report Templates","text":"<p>Because repository clients return HTML, they may use templates to translate the repository's JSON responses to fomatted markup. These templates should be in a directory whose name matches the file name of repository client, minus the .js at the end. For example, the APTrustClient is in the file plugins/repository/aptrust.js. It's templates are in plugins/repository/aptrust/.</p> <p>DART uses Handlebars templates. The APTrustClient includes templates to display ingested objects and work items, which are items queued for ingest or restoration.</p> <p>Since the APTrust client is currently the only existing repository client plugin, its source code is probably the best reference for writing your own client. The APTrustClient tests show how the client is expected to behave.</p> <p>You can see what the output of the APTrust client looks like in the dashboard documentation. If you're interested in seeing how the dashboard loads reports from repository clients, see the <code>show()</code> method of the DashboardController.</p> <p>Warning</p> <p>The API for repository clients is subject to change. Most changes will likely be additions.</p>"},{"location":"shared/downloads/","title":"Downloads","text":"<p>Updated March 14, 2023</p> <p>Download the DART installer for your system. The current version is 2.0.22 (released March 14, 2023).</p> <p>Mac: https://s3.amazonaws.com/aptrust.public.download/DART/DART-2.0.22.dmg</p> <p>Windows: https://s3.amazonaws.com/aptrust.public.download/DART/DART+Setup+2.0.22.exe</p> <p>Linux: https://s3.amazonaws.com/aptrust.public.download/DART/DART_2.0.22_amd64.deb</p> <p>Double-click the installer after download and follow the prompts on screen.</p> <p>For DART Runner, see DART Runner Downloads</p>"},{"location":"users/command_line/","title":"Command Line Reference","text":"<p>DART provides several ways of running jobs from the command line. The most convenient method, and the easiest to script, is to define a workflow and then create a JobParams object that describes which files to pass through the workflow and what custom metadata attributes to assign.</p> <p>Note that in all of these examples, the <code>dart</code> command is followed by two dashes, and then the command-line parameters. Parameters to the left of the double dash will be consumed by the Node.js runtime, while those to the right will be passed to DART.</p> <p>Note</p> <pre><code>Replace `dart` in the examples below with the full path to DART on your computer.\n\nOn Windows, the default path to the DART executable is `C:\\Users\\&lt;USERNAME&gt;\\AppData\\Local\\Programs\\DART\\DART.exe`. Replace &amp;lt;USERNAME&amp;gt; with your user name.\n\nOn Mac, the default path to DART is `/Applications/DART.app/Contents/MacOS/DART`.\n</code></pre> <ul> <li> <p>From a JobParams JSON file</p> <p><code>dart -- --job path/to/job_params.json</code></p> </li> <li> <p>From JobParams JSON passed through STDIN</p> <p><code>echo \"{ ... json ... }\" | dart -- --stdin</code></p> </li> <li> <p>From a Job JSON file</p> <p><code>dart -- --job path/to/job.json</code></p> <p>Note: DART does not yet export jobs to JSON. That feature is in the works.</p> </li> <li> <p>From Job JSON passed through STDIN</p> <p><code>echo { ... json ... } | dart -- --stdin</code></p> <p>Note</p> <p>Job JSON can be relatively large, since it may include a BagIt profile. Using JobParams is generally easier than using Jobs.</p> </li> <li> <p>By Job UUID</p> <p><code>dart -- --job 00000000-0000-0000-0000-000000000000</code></p> <p>Note</p> <p>The ability to extract Job UUIDs from DART is coming soon.</p> </li> </ul> <p>As of this writing (July 22, 2019), some elements of the CLI are subject to change and further development.</p>"},{"location":"users/command_line/#resource-usage-and-known-issues","title":"Resource Usage and Known Issues","text":"<p>DART uses Node.js, which is a relatively fast, efficient JavaScript runtime. Node, however, can use large amounts of memory, often 10-30 times what a similar application written in Go or C++ may use. You can expect each DART command-line process to use at least 50 MB of RAM on startup, and sometimes over 150 MB at runtime if it when creating large packages.</p>"},{"location":"users/command_line/#potentially-high-memory-usage-during-s3-uploads","title":"Potentially High Memory Usage During S3 Uploads","text":"<p>DART consumes the most memory when uploading large files to an S3-compliant endpoint. S3 clients need to load chunks of data into memory before streaming them across the network. When uploading a file of 100 MB, each chunk may be only 5-50 MB in size, increasing DART's memory usage by that amound until the chunk has been copied to the remote server.</p> <p>S3 allows uploads of up to 5 TB, with a maximum of 10,000 chunks. This means that when uploading a 5 TB file, DART's underlying S3 client will load chunks of about 535 MB each into memory. That's a considerable amount of memory, particularly on a computer that likely has a number of other open appilcations. For this reason, it's best to avoid running multiple simultaneous multi-terabyte jobs.</p>"},{"location":"users/command_line/#disk-usage-when-creating-large-packages","title":"Disk Usage When Creating Large Packages","text":"<p>When you're packaging very large files, keep in mind that you may run out of disk space. For example, DART needs about 5 TB of disk space to create a 5 TB bag. DART is fairly efficient about this, writing contents directly into a tar archive when possible to avoid multiple copies, and calculating all checksums in a single pass during the writes. However, if you're creating a 5 TB bag and you don't have 5 TB of disk space, the job is going to fail.</p> <p>Note that you can change the location of your bagging directory by choosing Settings &gt; App Settings from the menu and then clicking Bagging Directory. You can also change your bagging directory for a single job by setting the Output Path for that job. If you need extra disk space for a particular job, consider using a network share or an external USB drive as your bagging directory.</p>"},{"location":"users/command_line/#checking-the-logs-for-failed-jobs","title":"Checking the Logs for Failed Jobs","text":"<p>DART logs all of its work. If a job fails, check the logs for details.</p>"},{"location":"users/command_line/#sharing-jobs","title":"Sharing Jobs","text":"<p>Note that because details of jobs, workflows, and storage services are stored on your local DART computer, workflows and JobParams defined on one machine will not run on another machine that does not have matching settings.</p>"},{"location":"users/dart_runner/","title":"DART Runner","text":"<p>Because DART uses the Electron framework, it requires the presence of a graphical user interface and a windowing system, even when it's not going to use a GUI. That means it can't even start in comman-line mode unless it's running in a desktop environment. This limitation is inherent in Electron and makes DART unsuitable for running on a Linux server.</p> <p>For this reason, APTrust built dart-runner, which is a lightweight command-line version of DART that can run in server environments without a GUI. Dart-runner is intended to run workflows that were created and tested in DART.</p> <p>The general process is:</p> <ol> <li>Create a Workflow in DART and test it out locally to ensure it does what you want.</li> <li>Export the workflow as described on the Workflows page.</li> <li>Run dart-runner on the server with the exported workflow file and a list of items you want to run through that workflow. If you're running a batch job, the list must conform to the workflow CSV format used for batch jobs. If you're running one-off jobs using Job Params, be sure your JSON conforms to the format below. See below for details.</li> </ol> <p>Note</p> <p>When scripting jobs and workflows on Mac and Windows, you should stick with the DART CLI, since it's more mature as of late 2021. Since Windows and Mac include a GUI environment by default, DART and the DART CLI will always work.</p>"},{"location":"users/dart_runner/#downloads","title":"Downloads","text":"<p>Danger</p> <p>Versions of DART Runner prior to 0.96-beta have a bug that leads to incorrect tag values being written into bags when using workflow batch mode. Please download version 0.96-beta or later.</p> <p>Latest version is v0.99-beta, released June 6, 2025.</p> <p>Download the 0.99 beta version of dart-runner for Linux Intel.</p> <p>There's also a Mac-Intel version of the beta and an ARM version for M-Chip Macs if you want to experiment, but for now, APTrust suggests using the DART CLI on Mac.</p> <p>Because it's a single binary with no dependencies, there's no installation process for dart-runner. Simply copy the binary onto your computer and run.</p> <p>If you're interested, the souce code is available on GitHub at https://github.com/APTrust/dart-runner.</p>"},{"location":"users/dart_runner/#features","title":"Features","text":"<p>Dart-runner:</p> <ul> <li>is a single, lightweight binary, less than 10MB in size, with no external dependencies. To install, just copy the binary to your server.</li> <li>is much lighter on CPU and memory than DART.</li> <li>can run huge workflows unattended.</li> <li>can run multiple jobs in parallel.</li> <li>can be scripted from other languages like the DART CLI, though its syntax differs somewhat from the CLI.</li> <li>outputs clean, machine-readable JSON describing the outcome of every job. The output format is JSON Lines, with each line describing the outcome of a single job in the workflow.</li> <li>provides meaningful error messages when errors occur.</li> <li>supports piping, so you can send its output to any file you want for later analysis.</li> <li>provides meaningful return codes, so your script knows whether a job succeeded or failed.</li> </ul>"},{"location":"users/dart_runner/#limitations","title":"Limitations","text":"<p>Dart-runner is currently in beta and has the following limitations:</p> <ul> <li>It supports only the BagIt packaging format.</li> <li>It supports only S3 uploads (no SFTP).</li> <li>It's intended primarily for use on Linux servers.</li> </ul>"},{"location":"users/dart_runner/#differences-in-job-params-json","title":"Differences in Job Params JSON","text":"<p>The Job Params JSON format for dart-runner differs slightly from the JSON used in the DART CLI. Specifically:</p> <ul> <li>tags use \"value\" instead of \"userValue\" and</li> <li>you don't need to specify the workflow name or ID in the json, because it's specified as a file name on the command line</li> </ul> <p>The help text below shows an example of valid Job Params JSON for dart-runner.</p>"},{"location":"users/dart_runner/#usage","title":"Usage","text":""},{"location":"users/dart_runner/#options","title":"Options","text":"<pre><code>  --workflow     Path to workflow json file. Use this option if you are running\n                 a workflow against a batch of files. If you specify a workflow\n                 file, you must also specify --batch. Workflows can be exported\n                 from the DART UI.\n\n  --batch        Path to CSV batch file. Use this option with --workflow to\n                 specify a set of files or directories to run through a\n                 workflow. The batch file format is described at\n                 https://aptrust.github.io/dart-docs/users/workflows/batch_jobs/\n\n  --output-dir   Path to package output directory. Jobs and workflows will\n                 create bags in this directory. This option is always REQUIRED.\n\n  --delete       Delete bags after job completes? Set this to true or false.\n                 The default is true for jobs and workflows that include\n                 uploads: the bags will be deleted after successful uploads.\n                 Default is false for jobs and workflows that do not include\n                 uploads because you probably want to do something with the bag\n                 after it's created.\n\n  --concurrency  Number of jobs to run concurrently. Default is 1. Max value\n                 for this param should be less than or equal to the number of\n                 processors on your machine. You may get diminishing returns\n                 when setting this above 2 because most of the DART runner's\n                 work is reading from and writing to disk. This setting only\n                 makes sense for workflows. For a single job, you can omit\n                 this.\n\n  --help         Show this help document.\n</code></pre>"},{"location":"users/dart_runner/#examples","title":"Examples","text":"<p>If you're running a single job, you can send job params to dart-runner through STDIN, like this:</p> <pre><code>echo '{ json }' | dart-runner --workflow=workflow.json --output-dir=/dir\n</code></pre> <p>The job params json tells dart-runner which files to bag and what tag values to set. The workflow tells dart-runner which BagIt profile to use and where to send the bag.</p> <p>You can also feed the contents of a Job Params file to STDIN, as in either example below:</p> <pre><code>dart-runner --workflow=workflow.json --output-dir=/dir &lt; job_params.json\n\ncat job_params.json | dart-runner --workflow=workflow.json --output-dir=/dir\n</code></pre> <p>This runs the job described in the job_params.json file, writing the bag to the specified output directory.</p> <p>To run a workflow:</p> <pre><code>dart-runner --workflow=path/to/workflow.json  \\\n            --batch=path/to/batch.csv         \\\n            --output-dir=path/to/directory    \\\n            --concurrency=2                   \\\n            --delete=false\n</code></pre> <p>The command above runs all of the items listed in the <code>--batch</code> CSV file through the workflow described in the <code>--workflow</code> json file. Bags are written to the output directory. Setting the delete flag to false means the bags will not be deleted from the output directory after successful upload.</p> <p>The <code>--concurrency</code> flag above tells DART runner to work on 2 bags at a time (instead of the default 1 at a time) when bagging and uploading.</p> <p>Setting <code>--delete</code> to true (or omitting <code>--delete</code>) will cause bags to be deleted after successful upload.</p>"},{"location":"users/dart_runner/#exit-codes","title":"Exit Codes","text":"<pre><code>    0 - Normal exit. This means there were no errors and all tasks\n        succeeded.\n\n    1 - Runtime error. This means dart runner was able to start the\n        job, but encountered one or more errors along the way.\n\n        In a single job, this usually means at least one step of the job\n        failed: bagging, validation, or upload. Check the JSON output\n        for more details about where the failure occurred and what\n        happened.\n\n        When running a batch of jobs through a workflow, this exit code\n        means that one or more of the jobs in the batch failed. In this\n        case, you should find an error message on stderr saying something\n        like \"2 Job(s) failed\".\n\n    2 - Usage error. This means dart runner didn't even attempt to start\n        the job because something was wrong with the parameters. This\n        usually means you've forgotten to provide a necessary parameter\n        such as --workflow, or that the parameter points to a non-existant\n        or unreadable file. This error also occurs when a parameter contains\n        invalid or unparsable data (bad JSON or bad CSV format).\n\n        You should see a message on stderr describing the problem.\n</code></pre>"},{"location":"users/dart_runner/#sample-job-params-json","title":"Sample Job Params JSON","text":"<p>The following job params tell dart-runner to bag all of the files in /home/linus/documents and /home/linus/files. This also tells the bagger to write two tags with the assigned values into the bag-info.txt file and one tag into the aptrust-info.txt file.</p> <p>These job params would be combined with a workflow JSON file that would tell dart runner which BagIt profile to use when creating the bag, and where to send the bag when it's done.</p> <pre><code>{\n    \"packageName\": \"TestBag.tar\",\n    \"files\": [\n        \"/home/linus/documents\",\n        \"/home/linus/photos\"\n    ],\n    \"tags\": [\n        {\n            \"tagFile\": \"bag-info.txt\",\n            \"tagName\": \"Tag-One\",\n            \"value\":   \"Value One\"\n        },\n        {\n            \"tagFile\": \"bag-info.txt\",\n            \"tagName\": \"Tag-Two\",\n            \"value\":   \"Value Two\"\n        },\n        {\n            \"tagFile\": \"aptrust-info.txt\",\n            \"tagName\": \"Tag-Three\",\n            \"value\": \"Value Three\"\n        }\n    ]\n}\n</code></pre>"},{"location":"users/dart_runner/#output-format","title":"Output Format","text":"<p>For each completed job, DART Runner prints one line of JSON to stdout (standard output, which is usually a terminal). This means that when running a single job, you'll get one line of output. When running a batch job, you'll get one line for each entry in the CSV batch file.</p> <p>DART Runner also prints summary messages to stderr (standard error) when errors occur, though the JSON output on stdout will have more details about what actually went wrong.</p> <p>Output from a successful job looks like this:</p> <pre><code>{\n    \"jobName\": \"TestBag.tar\",\n    \"payloadByteCount\": 170742,\n    \"payloadFileCount\": 55,\n    \"succeeded\": true,\n    \"packageResult\": {\n        \"attempt\": 1,\n        \"completed\": \"2021-12-14T14:50:50.684655-05:00\",\n        \"errors\": {},\n        \"fileMtime\": \"2021-12-14T14:50:50.684637052-05:00\",\n        \"filepath\": \"/home/linustmp/bags/TestBag.tar\",\n        \"filesize\": 224256,\n        \"info\": \"\",\n        \"operation\": \"package\",\n        \"provider\": \"Bagger - DART Runner v0.91-beta-1-g70b06da for Darwin x86_64 (Build 70b06da 2021-12-14)\",\n        \"remoteChecksum\": \"\",\n        \"remoteURL\": \"\",\n        \"started\": \"2021-12-14T14:50:50.66122-05:00\",\n        \"warning\": \"\"\n    },\n    \"validationResult\": {\n        \"attempt\": 1,\n        \"completed\": \"2021-12-14T14:50:50.684665-05:00\",\n        \"errors\": {},\n        \"fileMtime\": \"2021-12-14T14:50:50.684637052-05:00\",\n        \"filepath\": \"/home/linustmp/bags/TestBag.tar\",\n        \"filesize\": 224256,\n        \"info\": \"\",\n        \"operation\": \"validation\",\n        \"provider\": \"Validator - DART Runner v0.91-beta-1-g70b06da for Darwin x86_64 (Build 70b06da 2021-12-14)\",\n        \"remoteChecksum\": \"\",\n        \"remoteURL\": \"\",\n        \"started\": \"2021-12-14T14:50:50.684656-05:00\",\n        \"warning\": \"\"\n    },\n    \"uploadResults\": [{\n        \"attempt\": 1,\n        \"completed\": \"2021-12-14T14:50:50.733585-05:00\",\n        \"errors\": {},\n        \"fileMtime\": \"2021-12-14T14:50:50.684637052-05:00\",\n        \"filepath\": \"/home/linustmp/bags/TestBag.tar\",\n        \"filesize\": 224256,\n        \"info\": \"Output file at /home/linustmp/bags/TestBag.tar was deleted at 2021-12-14T14:50:50-05:00\",\n        \"operation\": \"upload\",\n        \"provider\": \"Uploader - DART Runner v0.91-beta-1-g70b06da for Darwin x86_64 (Build 70b06da 2021-12-14)\",\n        \"remoteChecksum\": \"09f4a6d159e07cd11c82ead5d2a3e95c-1\",\n        \"remoteURL\": \"s3://localhost:9899/dart-runner.test/TestBag.tar\",\n        \"started\": \"2021-12-14T14:50:50.684666-05:00\",\n        \"warning\": \"\"\n    }],\n    \"validationErrors\": null\n}\n</code></pre> <p>The most important elements in this output are:</p> <pre><code>  succeeded       - true or false, indicating whether all steps of the job\n                    succeeded\n\n  errors          - Within each result, this will contain a set of name-value\n                    pairs indicating what went wrong. This element will be\n                    empty if the operation succeeded.\n\n  remoteURL       - The URL to which the package was uploaded. (Applies\n                    only to uploadResults.)\n\n  remoteChecksum  - The ETag returned by the remote S3 server after a\n                    successful upload. (Applies only to uploadResults for\n                    S3 uploads.)\n</code></pre>"},{"location":"users/dart_runner/#scripting","title":"Scripting","text":"<p>Most scripting languages provide ways of capturing the stdout and stderr output of external programs called from within the script. Most languages also let you capture the external process' return code.</p> <p>When scriping DART Runner, you should generally do the following:</p> <ol> <li>Capture the exit code. If it's not zero, log a message or perform some    other kind of error handling.</li> <li>Redirect stdout to a file if you want to save all the JSON instead of    capturing it.</li> </ol> <p>You can redirect stdout to a file like this:</p> <pre><code>dart-runner [args] &gt; output_log.json\n</code></pre>"},{"location":"users/dart_runner/#additional-resources","title":"Additional Resources","text":"<ul> <li>DART Runner Source on GitHub</li> <li>DART Batch File Format</li> </ul>"},{"location":"users/dashboard/","title":"Dashboard","text":"<p>The dashboard shows running jobs, recently completed jobs, and selected items from remote repositories.</p> <p></p>"},{"location":"users/dashboard/#running-jobs","title":"Running Jobs","text":"<p>The Running Jobs panel shows jobs DART is currently running on your computer. If more than one job is currently running, you can scroll inside the panel to see the progress of each. Also note the blue badge in the upper right corner of the window showing there are two running jobs. The blue badge appears on all DART views as long as jobs are running.</p> <p>Note that DART runs each job in a separate process. Actions you take in DART do not affect the running jobs.</p> <p>Warning</p> <p>When you shut down the DART application, all DART jobs stop, even if they are not yet complete. Don't close the DART window while jobs are running, unless you intend to stop all of the jobs.</p>"},{"location":"users/dashboard/#progress-bars-for-running-jobs","title":"Progress Bars for Running Jobs","text":"<p>The progress bars for running jobs show how much progress DART has made in each of the job's steps, which may include packaging, validation, and/or uploading.</p> <p>Info</p> <p>While the progress bars for packaging and validation are very accurate, the progress bar for uploads runs slightly ahead of the actual upload progress. DART knows how many bytes of an upload it has prepared to send, but not how many have been received by the remote host. It's common for the upload progress bar to appear to stall at about 98% while the last chunk of data goes across the wire. For smaller uploads, the stall may last only a second or two. For very large uploads, the final chunk may be hundreds of megabytes and may take several minutes to complete.</p>"},{"location":"users/dashboard/#recent-jobs","title":"Recent Jobs","text":"<p>The Recent Jobs panel lists recently completed jobs. The Outcome column shows the job's last completed step, while the Date column shows when that step was completed. You can get more detailed information by clicking Jobs &gt; List from the top menu.</p> <p>See also: Jobs</p>"},{"location":"users/dashboard/#repositories","title":"Repositories","text":"<p>The Repositories panels show items from remote repositories that DART knows how to connect to. In the screenshot above, this panel shows items recently ingested into APTrust's demo repository:</p> <p></p> <p>The panel below shows a list of pending or recently completed tasks from APTrust demo system. Some repository panels, such as those from APTrust, show additional information when you mouse over an item.</p> <p></p> <p>The panels show errors if they cannot communicate with the remote repository. If you run into errors like this, chances are your Remote Repository is incorrectly configured.</p> <p></p> <p>Info</p> <p>Remote repository panels require both a correctly configured Remote Repository setting and a plugin that knows how to communicate with the remote repository. Plugins are typically written by developers associated with the repository, and are packaged with the DART installation.</p> <p>See also: Remote Repository</p>"},{"location":"users/faq/","title":"Frequently Asked Questions","text":""},{"location":"users/faq/#what-is-darts-bag-size-limit","title":"What is DART's bag size limit?","text":"<p>DART can create bags of almost any size, provided you have enough disk space. Several APTrust depositors have used DART to create and upload bags in the 500 GB - 800 GB range. The largest so far has been 1.5 TB.</p>"},{"location":"users/faq/#things-to-look-out-for-when-creating-large-bags","title":"Things to look out for when creating large bags","text":"<ul> <li>Be sure you have enough disk space to actually bag the files. In some cases, may need to reset the output path for a large bag, to point to an external drive. See the Output Path setting in packaging for details.</li> <li>If you're bagging files from a shared network drive with a spotty connection, the bagging operation may fail if the network connection is interrupted. In these cases, you may have more success creating ten 10 GB bags than one 100 GB bag.</li> <li>DART validates bags after it creates them, and can take hours to validate very large bags. DART spends most of this time validating file checksums against the manifests. Be patient!</li> <li>Uploading large bags to an S3 or SFTP server can take a long time, especially if your network connection is slow or unreliable.</li> <li>The maximum size for S3 objects is 5 TB. If you create a bag larger than that, you will not be able to upload it to S3. SFTP file size limits are set individually for each system by the administrator.</li> </ul>"},{"location":"users/faq/#why-doesnt-dart-preserve-empty-folders-when-bagging","title":"Why doesn't DART preserve empty folders when bagging?","text":"<p>DART ignores empty folders to keep in line with the original APTrust bagging guidelines from 2014. APTrust uses a number of S3-compliant storage backends to preserve depositor data. We take the bag apart, store files individually, then reassemble the bag in the latest BagIt format for restoration. (Restoration may occur years after ingest, when the BagIt spec has changed.)</p> <p>S3 can store empty files, but not empty folders. While we could accept a bag containing empty folders, we would have no way of restoring those empty folders later.</p> <p>The workaround for this is to put empty <code>.keep</code> files in the empty folders you want to preserve. PHP and some other programming languages use this practice.</p>"},{"location":"users/faq/#where-can-i-report-bugs-or-request-new-features","title":"Where can I report bugs or request new features?","text":"<p>We keep track of bug reports and feature requests at https://github.com/APTrust/dart/issues.</p> <p>When reporting an issue, please check the list to see if someone else has already reported it. If the issue exists, add your comments instead of opening a new duplicate issue.</p> <p>For bug reports, try to include the following:</p> <ul> <li>A one-line summary of the problem</li> <li>A screenshot or copy of an error message you encountered</li> <li>The steps you took to produce or expose the problem</li> <li>What you expected to happen after taking these steps</li> <li>What actually happened</li> </ul>"},{"location":"users/getting_started/","title":"Getting Started","text":"<p>DART is the Digital Archivist's Resource Tool. Its primary purpose is to package digital materials and send them off to long-term preservation storage. DART's initial release focuses on packaging materials in BagIt format and uploading them to S3 buckets for ingest in APTrust. DART can be extended through plugins to produce other packaging formats and to communicated via additional network protocols.</p> <p>DART runs in both graphical and command-line modes on Windows, Mac, and Linux. What can you do with it? Take a look:</p>"},{"location":"users/getting_started/#installation","title":"Installation","text":"<p>Updated March 14, 2023</p> <p>Download the DART installer for your system. The current version is 2.0.22 (released March 14, 2023).</p> <p>Mac: https://s3.amazonaws.com/aptrust.public.download/DART/DART-2.0.22.dmg</p> <p>Windows: https://s3.amazonaws.com/aptrust.public.download/DART/DART+Setup+2.0.22.exe</p> <p>Linux: https://s3.amazonaws.com/aptrust.public.download/DART/DART_2.0.22_amd64.deb</p> <p>Double-click the installer after download and follow the prompts on screen.</p> <p>For DART Runner, see DART Runner Downloads</p>"},{"location":"users/getting_started/#set-up","title":"Set Up","text":"<p>After installation, DART includes two BagIt profiles by default, one for APTrust and one for DPN. You can use one of these two profiles to create your first job. While jobs can include packaging, validation, and upload operations, you won't be able to upload anything until you've set up a Storage Service to receive an upload. With this, your first job will be limited to creating and validating a BagIt bag.</p>"},{"location":"users/getting_started/#running-your-first-job","title":"Running Your First Job","text":"<p>Follow these steps to create a valid local bag that conforms to the APTrust BagIt profile:</p> <ol> <li> <p>Choose Jobs &gt; New from the main menu.</p> <p></p> </li> <li> <p>Drag some files or folders into the files window. To avoid a long-running job that will consume a lot of disk space, choose only a few megabytes of files.</p> <p></p> </li> <li> <p>Click Next and set the following:</p> <ol> <li>Packaging Format: BagIt</li> <li>BagIt Profile: APTrust</li> <li>Package Name: test_bag</li> <li>Output Path: Don't edit this for now. DART will set it for you.</li> </ol> <p></p> </li> <li> <p>Click Next and set the required metadata attributes, which are marked with a red asterisk. For an APTrust bag, these include the Access and Title tags in the aptrust-info.txt file, and the Source-Organization tag in the bag-info.txt file.</p> <p></p> </li> <li> <p>Click Next to choose the upload targets. Since there will be no available upload targets after initial installtion, Click Next again.</p> </li> <li> <p>The Review and Run screen shows the details of the job you've just defined. Click Run Job to run the job.</p> <p></p> </li> </ol> <p>When the job is complete, you'll find your bag in the Output Path displayed on the Review and Run screen.</p>"},{"location":"users/getting_started/#dart-user-group","title":"DART User Group","text":"<p>APTrust hosts a DART User Group for the entire digital preservation community. This group will primarily be a mailing list, where users can share experiences, ask questions, and support one another. Depending on the level of interest and engagement, we may expand this initiative to include regular virtual meetings and more structured activities in the future.</p>"},{"location":"users/getting_started/#further-reading","title":"Further Reading","text":"<p>BagIt Profiles describes how to build and customize BagIt profiles, so DART can build bags exactly as you want them. Be sure to read the section on tag default values under Editing a Tag. That will save you from re-entering common tag values, such as Source-Organization, every time you create a new bag.</p> <p>The Dashboard displays information about currently running and recently completed jobs. If you've configured Remote Repository connections, the dashboard can show the status of recent and pending ingests.</p> <p>To get details about what DART is doing, check the Logs.</p> <p>The Settings section describes how to set up upload targets, remote repository connections, and more.</p> <p>Organizations that distribute DART to their members can Export Settings to help users quickly configure DART for their needs.</p> <p>After you've defined and tested a successful job, you can convert it to a Workflow to run other files through the same process.</p> <p>APTrust members may also wish to consult the Deposit Guidelines when preparing deposits.</p>"},{"location":"users/logs/","title":"Logs","text":"<p>DART logs most of its activities as it works. If you're looking for detailed infomation about what DART is doing or has done, or if you want to see detailed error messages, check the logs.</p> <p>The easiest way to view the DART log is to click Help &gt; Logs from the menu. This will display a live log window that shows updates as they are written.</p> <p></p> <p>The About dialog will show the location of the DART log file.</p>"},{"location":"users/scripting/","title":"Scripting with DART","text":"<p>The easiest way to script DART jobs is to:</p> <ol> <li> <p>Create a workflow.</p> <p>Info</p> <p>If your workflow includes generating bags, you should also create a custom BagIt profile with default values so that your script will only need to create a few bag-specific tag values at runtime. See Customizing BagIt Profiles for more info.</p> </li> <li> <p>Create a simple data object that can be transformed into a JSON structure that matches DART's JobParams object.</p> </li> <li> <p>Pass the JSON to the DART command through STDIN.</p> </li> </ol> <p>The examples below show how to do this in Ruby and Python. Note that both examples create the following JSON structure.</p> <pre><code>{\n    \"workflowName\": \"DART Test Workflow\",\n    \"packageName\": \"test.edu.my_files.tar\",\n    \"files\": [\"/Users/apd4n/aptrust/dart-docs/site\", \"/Users/apd4n/tmp/logs\"],\n    \"tags\": [{\n        \"tagFile\": \"bag-info.txt\",\n        \"tagName\": \"Bag-Group-Identifier\",\n        \"userValue\": \"TestGroup_001\"\n    }, {\n        \"tagFile\": \"aptrust-info.txt\",\n        \"tagName\": \"Title\",\n        \"userValue\": \"Workflow Test Files\"\n    }, {\n        \"tagFile\": \"aptrust-info.txt\",\n        \"tagName\": \"Description\",\n        \"userValue\": \"Contains miscellaneous files for workflow testing.\"\n    }]\n}\n</code></pre>"},{"location":"users/scripting/#example-ruby","title":"Example: Ruby","text":"<p>To script DART actions, you'll need one simple Ruby class that allows you to define and run a job. You can cut and paste this to get started, but note that you will likely have to change the value of <code>@@dart_command</code> to point to the DART executable on your local machine.</p> <pre><code>require 'json'\n\nclass Job\n\n  # Be sure to set this appropriately for your system.\n  # The command 'npm start' is for DART development use only.\n  @@dart_command = 'npm start'\n\n  attr_accessor :workflow_name, :package_name, :files, :tags\n\n  def initialize(workflow_name, package_name)\n    @workflow_name = workflow_name\n    @package_name = package_name\n    @files = []\n    @tags = []\n  end\n\n  def to_json(options={})\n    {\n      workflowName: workflow_name,\n      packageName: package_name,\n      files: files,\n      tags: tags\n    }.to_json\n  end\n\n  def add_file(path)\n    @files &lt;&lt; path\n  end\n\n  def add_tag(tag_file, tag_name, value)\n    @tags &lt;&lt; {\n      tagFile: tag_file,\n      tagName: tag_name,\n      userValue: value\n    }\n  end\n\n  def run\n    json_string = self.to_json\n    puts json_string\n    puts \"Starting job\"\n    opts = {\n      external_encoding: \"UTF-8\",\n      err: [:child, :out]\n    }\n    IO.popen(\"#{@@dart_command} -- --stdin\", \"r+\", opts) {|pipe|\n      pipe.write json_string + \"\\n\"\n      pipe.close_write\n      puts pipe.read\n    }\n    return $?.exitstatus\n  end\nend\n</code></pre> <p>Assuming you saved the code above to a file called <code>job.rb</code>, you can create a script like the following to run a job based on a pre-defined DART workflow.</p> <pre><code>require './job'\n\n# Create a new job using the \"DART Test Workflow.\"\n# This job will create a tarred bag called test.edu.my_files.tar\n# in your DART bagging directory.\n\njob = Job.new(\"DART Test Workflow\", \"test.edu.my_files.tar\")\n\n# Add two directories to the list of items that should go into\n# the bag's payload. Note that you can add a mix of files and\n# directories.\n\njob.add_file(\"/Users/apd4n/aptrust/dart-docs/site\")\njob.add_file(\"/Users/apd4n/tmp/logs\")\n\n# \"DART Test Workflow\" uses a BagIt profile with a number of\n# preset default values, which are fine for tags like Contact-Email,\n# which doesn't change from bag to bag. Here we set bag-specific\n# tag values.\n\njob.add_tag(\"bag-info.txt\", \"Bag-Group-Identifier\", \"TestGroup_001\")\njob.add_tag(\"aptrust-info.txt\", \"Title\", \"Workflow Test Files\")\njob.add_tag(\"aptrust-info.txt\", \"Description\", \"Contains miscellaneous files for workflow testing.\")\n\n# Run the job and check the exit code. 0 indicates success.\n# Non-zero values indicate failure.\nexit_code = job.run()\n\nif exit_code == 0\n  puts \"Job completed\"\nelse\n  puts \"Job failed. Check the DART log for details.\"\nend\n</code></pre>"},{"location":"users/scripting/#example-python","title":"Example: Python","text":"<p>The following Python class will help you define and run DART jobs. You can cut and paste this to get started, but note that you will likely have to change the value of <code>dart_command</code> to point to the DART executable on your local machine.</p> <pre><code>import json\nimport sys\nfrom subprocess import Popen, PIPE\n\nclass Job:\n\n    # Be sure to set this appropriately for your system.\n    # The command 'npm start' is for DART development use only.\n    dart_command = 'npm start'\n\n    def __init__(self, workflow_name, package_name):\n        self.workflow_name = workflow_name\n        self.package_name = package_name\n        self.files = []\n        self.tags = []\n\n    def add_file(self, path):\n        self.files.append(path)\n\n    def add_tag(self, tag_file, tag_name, value):\n        self.tags.append({\n            \"tagFile\": tag_file,\n            \"tagName\": tag_name,\n            \"userValue\": value\n        })\n\n    def to_json(self):\n        _dict = {\n            \"workflowName\": self.workflow_name,\n            \"packageName\": self.package_name,\n            \"files\": self.files,\n            \"tags\": self.tags\n        }\n        return json.dumps(_dict)\n\n    def run(self):\n        json_string = self.to_json()\n        print(json_string)\n        print(\"Starting job\")\n        cmd = \"%s -- --stdin\" % Job.dart_command\n        child = Popen(cmd, shell=True, stdin=PIPE, stdout=PIPE, close_fds=True)\n        stdout_data, stderr_data = child.communicate(json_string + \"\\n\")\n        if stdout_data is not None:\n            print(stdout_data)\n        if stderr_data is not None:\n            sys.stderr.write(stderr_data)\n        return child.returncode\n</code></pre> <p>Assuming you saved the code above to a file called job.py, you can create a script like the following to run a job based on a pre-defined DART workflow.</p> <pre><code>from job import Job\n\n\n# Create a new job using the \"DART Test Workflow.\"\n# This job will create a tarred bag called test.edu.my_files.tar\n# in your DART bagging directory.\n\njob = Job(\"DART Test Workflow\", \"test.edu.my_files.tar\")\n\n# Add two directories to the list of items that should go into\n# the bag's payload. Note that you can add a mix of files and\n# directories.\n\njob.add_file(\"/Users/apd4n/aptrust/dart-docs/site\")\njob.add_file(\"/Users/apd4n/tmp/logs\")\n\n# \"DART Test Workflow\" uses a BagIt profile with a number of\n# preset default values, which are fine for tags like Contact-Email,\n# which doesn't change from bag to bag. Here we set bag-specific\n# tag values.\n\njob.add_tag(\"bag-info.txt\", \"Bag-Group-Identifier\", \"TestGroup_001\")\njob.add_tag(\"aptrust-info.txt\", \"Title\", \"Workflow Test Files\")\njob.add_tag(\"aptrust-info.txt\", \"Description\", \"Contains miscellaneous files for workflow testing.\")\n\n# Run the job and check the exit code. 0 indicates success.\n# Non-zero values indicate failure.\nexit_code = job.run()\n\nif exit_code == 0:\n    print(\"Job completed\")\nelse:\n    print(\"Job failed. Check the DART log for details.\")\n</code></pre>"},{"location":"users/bagit/","title":"BagIt Profiles","text":"<p>While the BagIt specification describes the general requirements for a valid bag, BagIt profiles describe the tags, manifests, and tag manifests required to make a valid bag for a specific organization or purpose.</p> <p>DART uses BagIt profiles to produce bags that adhere to a profile, and to validate that bags do adhere to the profile.</p>"},{"location":"users/bagit/#dart-bagit-profiles","title":"DART BagIt Profiles","text":"<p>While the general specification for BagIt Profiles can be found on GitHub, DART's BagIt profiles differ from the published specification in the following ways:</p> <ol> <li> <p>DART profiles use camel case identifiers with no hyphens or periods in attribute names. For example, the <code>Allow-Fetch.txt</code> in GitHub BagIt profiles is called <code>allowFetchTxt</code> in DART profiles. This is in part to simplify JavaScript attributes so they can be reference in dot notation, and in part because the nedb object database used in early versions of DART did not support attribute names containing dots.</p> </li> <li> <p>DART profiles include an <code>id</code> attribute with a UUID. This is used internally, while the bagItProfileIdentifier URL is used externally.</p> </li> <li> <p>DART profiles include the following additional boolean attributes:</p> <ol> <li><code>allowMiscTopLevelFiles</code> which indicates whether files other than        manifests and tag manifests are allowed in the bag's root directory.</li> <li><code>allowMiscDirectories</code> which indicates whether directories other than        /data and its children are allowed in the bag.</li> <li><code>tarDirMustMatchName</code> which indicates whether the name of the        unserialized bag must match the name of the serialized bag, minus        the serialization extension. (That is, whether my_bag.tar must untar        to my_bag, and my_bag.zip must unzip to my_bag.)</li> </ol> </li> <li> <p>DART includes the attribute <code>baseProfileId</code> for internal use, to know whether    a user-created profile was based on an existing profile.</p> </li> <li> <p>DART includes the <code>isBuiltIn</code> attribute to indicate that a profile was built    in to the application (usually through a setup module or migration). These    profiles cannot be deleted.</p> </li> <li> <p>DART does not specify <code>tagFilesRequired</code> or <code>tagFilesAllowed</code>.</p> </li> <li> <p>DART BagIt profiles specify all tag requirements in a single list called    <code>tags</code> while the GitHub BagIt spec defines them as nested objects with    arbitrary names. The single list of uniform objects in the DART model makes    tag definitions easier to manipulate.</p> </li> <li> <p>While tag definitions in the GitHub BagIt Profile spec include only the    attributes <code>required</code> and <code>values</code>, DART tag definitions include the following    attributes:</p> <ol> <li><code>id</code> - A unique identifier in UUID format that DART uses internally.        This allows users to edit tag definitions in the DART UI without        the system losing track of which tag is being edited. The UUID is        immutable while all other attributes are not.</li> <li><code>tagFile</code> - The name of the tag file that contains the tag. This is        a path relative to the bag root. For example, <code>bag-info.txt</code> or        <code>custom-tags/image-credits.txt</code>.</li> <li><code>tagName</code> - The name of the tag. For example, <code>Source-Organization</code>.</li> <li><code>required</code> - A boolean indicating whether the tag is required.</li> <li><code>values</code> - An option list of legal values. If this list is present        and a tag contains a value that's not in the list, the value and        the bag are invalid.</li> <li><code>defaultValue</code> - A default value assigned by the user to the tag.        DART's BagIt Profile editor allows users to specify default values        to tags that will be consistent across bags. For example, users        can define a default value to <code>Source-Organization</code> so they don't        have to assign it repeatedly every time they create a new bag.</li> <li><code>userValue</code> - The value of a tag to be written into or read from a        tag file. Users can specify a userValue that overrides the        defaultValue when they create a bag. When reading a bag, DART        assigns the actual value of a tag to what was read from the bag.</li> <li><code>isBuiltIn</code> - A boolean value indicating whether a tag definition        is built in (as opposed to user-created). DART's BagIt Profile        editor allows users to add custom tags to a published profile,        such as the APTrust profile, while preventing them from deleting        built-in tag definitions. Deleting a built-in tag definition such        as <code>Source-Organization</code> would lead to DART generating invalid bags.</li> <li><code>help</code> - Help text to describe the significance of the tag to the        user. If present, the DART UI will display this message for the        user's edification and delight.</li> </ol> </li> </ol>"},{"location":"users/bagit/#built-in-profiles","title":"Built-in Profiles","text":"<p>DART includes the following built-in profiles. Note that the BagIt Profile editor allows you to clone and customize each of these, though customization is limited to adding tags and tag files, and setting default tag values.</p> <ul> <li> <p>APTrust - The standard APTrust BagIt profile.</p> </li> <li> <p>BTR - The Beyond the Repository BagIt profile, which will be accepted by a number of distributed digital preservation repositories.</p> </li> <li> <p>Empty Profile - A BagIt profile that defines the basic tags of the BagIt specification but does not require any of them. You can clone use this profile to create valid generic bags.</p> </li> </ul>"},{"location":"users/bagit/#custom-profiles","title":"Custom Profiles","text":"<p>DART enables users to create new BagIt profiles from scratch, and to clone and modify existing profiles.</p> <p>See also: Creating BagIt Profiles, Customizing BagIt Profiles</p>"},{"location":"users/bagit/creating/","title":"Creating Profiles","text":"<p>To create a new BagIt Profile:</p> <ol> <li> <p>Choose Settings &gt; BagIt Profiles from the menu.</p> </li> <li> <p>Click the New button at the top of the profiles list.</p> </li> <li> <p>Select an option from the Base Profile list.</p> <ol> <li> <p>Chose None if you want to create a new profile from scratch.</p> </li> <li> <p>Choose the name of an existing profile if you want to clone and modify    an existing profile.</p> </li> </ol> </li> <li> <p>Click the Create button.</p> </li> </ol> <p></p> <p>Note</p> <p>Cloning an existing BagIt profile can be useful if you're going to create bags on behalf of more than one organization or group. You can set different default values for tags such as <code>Source-Organization</code> or <code>Contact-Email</code> within each cloned profile, and then assign meaningful names such as <code>APTrust Profile for Law Library</code> and <code>APTrust Profile for Engineering Library</code>.</p> <p>Once you've created a new BagIt profile, you'll want to customize it using the built-in BagIt profile editor.</p> <p>See also: Customizing BagIt Profiles</p>"},{"location":"users/bagit/customizing/","title":"Customizing Profiles","text":"<p>To customize a BagIt profile, click the name of the profile in the profiles list, or click new and follow the steps to create a BagIt profile.</p> <p></p>"},{"location":"users/bagit/customizing/#about","title":"About","text":"<p>The About tab of the BagIt profile editor enables you to set a name and description for your profile.</p> <p></p>"},{"location":"users/bagit/customizing/#info","title":"Info","text":"<p>The Info tab includes fields to edit the BagIt-Profile-Info section of the profile. This includes the profile's URL identifier.</p> <p></p>"},{"location":"users/bagit/customizing/#general","title":"General","text":"<p>The General tab includes information about which BagIt versions your profile accepts, whether to allow fetch.txt files, and whether to allow miscellaneous top level files (arbitrary tag files directly under the root directory) and miscellaneous directories outside the payload (/data) directory.</p> <p></p>"},{"location":"users/bagit/customizing/#manifests","title":"Manifests","text":"<p>The Manifests tab specifies which manifests and tag manifests your profile requires. You can select multiple options from each list by holding down the Control key on Windows or the Command key on Mac while you click.</p> <p></p>"},{"location":"users/bagit/customizing/#serialization","title":"Serialization","text":"<p>The Serialization tab allows you to specify whether serialization is required, optional, or forbidden, as well as which serialization formats are supported. You can also specify here whether serialized bags must deserialize to a directory whose name matches the serialized file name. (For example, my_bag.tar must untar to my_bag and my_bag.zip must unzip to my_bag.)</p> <p></p>"},{"location":"users/bagit/customizing/#tag-files","title":"Tag Files","text":"<p>The Tag Files tab includes a drop-down list for editing the profile's tag files, and for adding new tag files.</p> <p></p>"},{"location":"users/bagit/customizing/#adding-a-new-tag-file","title":"Adding a New Tag File","text":"<p>To add a new tag file:</p> <ol> <li> <p>Click Add New Tag File on the drop-down list.</p> </li> <li> <p>Enter a name for the tag file. If the name includes slashes, the tag file will be created in a subdirectory beneath the bag's root directory. For example, <code>custom-tags/photo-credits.txt</code> would be placed in the bag's custom-tags directory.</p> </li> <li> <p>Click the Save button.</p> </li> </ol> <p></p>"},{"location":"users/bagit/customizing/#editing-a-tag-file","title":"Editing a Tag File","text":"<p>To edit a tag file:</p> <ol> <li> <p>Click the Tag Files tab.</p> </li> <li> <p>Select the name of the file you want to edit.</p> </li> </ol> <p></p>"},{"location":"users/bagit/customizing/#adding-a-tag","title":"Adding a Tag","text":"<p>To add a tag to a tag file, click the New Tag button (visible in the screenshot above), then follow the steps in Editing a Tag below.</p>"},{"location":"users/bagit/customizing/#editing-a-tag","title":"Editing a Tag","text":"<p>To edit a tag:</p> <ol> <li> <p>Click the name of the tag you want to edit.</p> </li> <li> <p>Set the appropriate values in the dialog.</p> <ol> <li> <p>Tag Name - The name of the tag. This is required.</p> </li> <li> <p>Required - A Yes/No value indicating whether the tag must have a value    for the bag to be considered valid.</p> </li> <li> <p>Values - An optional list of allowed values for this tag.</p> </li> <li> <p>Default Value - An optional default value for this tag.</p> </li> <li> <p>Help - An optional help message. This message will be displayed to    users who are filling out a bag's tag values in DART.</p> </li> </ol> </li> <li> <p>Click the Save button.</p> </li> </ol> <p></p>"},{"location":"users/bagit/customizing/#deleting-a-tag","title":"Deleting a Tag","text":"<p>To delete a tag, click the red X to the right of the tag name in the tag list view. If the tag does not have a red X, it is a required tag from a published profile and cannot be deleted. When you delete the last tag of a tag file, DART deletes the tag file as well.</p> <p></p>"},{"location":"users/bagit/customizing/#deleting-a-tag-file","title":"Deleting a Tag File","text":"<p>To delete a tag file, delete all of the tags in the file. See Deleting a Tag above.</p>"},{"location":"users/bagit/customizing/#adding-the-wasabi-tx-storage-option","title":"Adding the Wasabi-TX Storage Option","text":"<p>As of April, 2023, APTrust can store objects in Wasabi's Texas datacenter. This storage option is not listed in version 2.2 of the APTrust BagIt profile. Follow these steps to add it, so you can send bags to the beautiful state of Texas!</p> <ol> <li>Click Settings &gt; BagIt Profiles from the top menu.</li> <li>Click the APTrust profile. It should have the name APTrust and description APTrust 2.2 default BagIt profile.</li> <li>From the tab menu, choose Tag Files &gt; aptrust-info.txt</li> <li>In the list of tags, click Storage Option.</li> <li>Scroll to the bottom of the Values box and press Enter to add a new line.</li> <li>Type Wasabi-TX into the Values box. Be sure the capitalization matches. W, T, and X should be capitalized, with a dash before the TX, as in the screenshot below.</li> <li>Click Save.</li> </ol> <p></p> <p>The next time you create a bag using the APTrust BagIt profile, you will be able to choose Wasabi-TX as the storage option.</p>"},{"location":"users/bagit/exporting/","title":"Exporting Profiles","text":"<p>DART can export profiles to the BagIt Profiles 1.3 specification, though note that that specification does not support validation of tags outside the bagit.txt and bag-info.txt files. When exporting a DART profile to the 1.3 specification format, you will lose information describing how to validate tags outside of those files.</p> <p>To export:</p> <ol> <li> <p>Choose Settings &gt; BagIt Profiles from the main menu.</p> <p></p> </li> <li> <p>In the profile list, click the profile you want to export.</p> </li> <li>Click the Export Profile button at the bottom right of the profile detail page.</li> </ol> <p></p> <ol> <li>Copy and paste the exported JSON into a file of your choice.</li> </ol> <p></p> <p>Note the instructions at the top of the export page. If you plan to publish the exported profile, be sure to set the correct profile URL. When a BagIt validator tries to validate bags created with this profile, it will try to fetch the profile from the URL. If the URL is incorrect, validation will fail.</p>"},{"location":"users/bagit/importing/","title":"Importing Profiles","text":"<p>DART can import BagIt profiles that follow the BagIt Profiles 1.3 specification, ordered Library of Congress profiles, such as SANC State Profile, and unordered Library of Congress profiles like other-project-profile.json.</p> <p>To import a profile:</p> <ol> <li>Choose Settings &gt; BagIt Profiles from the main menu.</li> <li> <p>Click the Import Profile button in the top right corner.</p> <p></p> </li> <li> <p>Option 1: Choose Import from URL. Type or paste the URL you want to import, then click Import.</p> <p></p> </li> <li> <p>Option 2: Choose Import from JSON, paste the BagIt profile JSON you want to import, then click Import.</p> <p></p> </li> </ol>"},{"location":"users/jobs/","title":"Jobs","text":"<p>A job is a set of actions that may include one or more of the following:</p> <ul> <li>Packaging a number of files into a defined format, such as BagIt, tar, etc.</li> <li>Validating the package.</li> <li>Uploading the package to one or more remote locations.</li> </ul> <p>DART was initially designed for APTrust depositors to bag files according to the APTrust BagIt profile, validate the bags, and then send them to an S3 bucket for ingest into APTrust's preservation repository.</p> <p>DART plugin architecture will allow it to handle similary patterned jobs that use different packaging formats and network protocols such as zip, rar, or parchive formats sent via FTP or rsync.</p> <p>The process for creating and running jobs invlolves these steps:</p> <ol> <li>Adding files.</li> <li>Choosing a package format.</li> <li>Adding metadata.</li> <li>Choosing upload targets.</li> <li>Reviewing and running the job.</li> <li>Troubleshooting.</li> </ol> <p>For infomation about developing DART plugins, see the Plugins Developer Documentation.</p>"},{"location":"users/jobs/#jobs-and-workflows","title":"Jobs and Workflows","text":"<p>Jobs can be converted to workflows. A workflow is essentially a job template that can be run in the DART UI or from the command line. A workflow enables you to run a number of jobs that all follow the same pattern (same packaging format, same default metadata values, and same upload targets).</p>"},{"location":"users/jobs/delete/","title":"Deleting Jobs","text":"<p>To delete a job:</p> <ol> <li> <p>Choose Jobs &gt; List from the menu.</p> </li> <li> <p>Click on the job you want to delete.</p> <p></p> </li> <li> <p>Click the red Delete button in the bottom left corner of the Job files page.</p> <p></p> </li> </ol>"},{"location":"users/jobs/files/","title":"Adding Files","text":"<p>After you create a new job or click on a job in the Jobs list, you'll see the files page. You can add files to a job by dragging them into the drop zone, which is outlined in blue.</p> <p>The files window shows the total number of files and directories you've added, and total size of all the files.</p> <p></p> <p>After adding files and directories, click the Next button to move on to the Packaging step. Note that you can also delete the job from this screen.</p>"},{"location":"users/jobs/files/#removing-files","title":"Removing Files","text":"<p>To remove a file from the job, click the red X in the row of the file you want to delete.</p>"},{"location":"users/jobs/list/","title":"Listing Jobs","text":"<p>To list all jobs, Choose Jobs &gt; List from the menu. The list shows the job name and information about when it was last packaged, validated, and/or uploaded.</p> <p>Click on any job in the list to view it. On the following screen, you'll be able to edit or delete the job.</p> <p></p>"},{"location":"users/jobs/metadata/","title":"Metadata","text":"<p>You'll see the job metadata screen if you chose the BagIt packaging format on the previous screen. This screen allows you to enter values for tags that will go into BagIt tag files. By default, this screen only shows tags whose values are not already filled in by default values.</p> <p>Default values come from two places:</p> <ul> <li> <p>Default tag values you've entered into your local BagIt profiles. See the Editing a Tag section for information about setting default values.</p> </li> <li> <p>Auto-filled values calculated by DART when it creates the bag, such as the Payload-Oxum, Bagging-Software, and Bagging-Date.</p> </li> </ul> <p>If you want to edit tags with pre-set default values, click the Show All Tags button in the top right corner of the page.</p> <p></p>"},{"location":"users/jobs/metadata/#adding-custom-tags","title":"Adding Custom Tags","text":"<p>You can add a custom tag to a bag by clicking the Add New Tag button at the top of the page. Note that adding extra tags to a bag generally will not cause the bag to be invalid. The only exception to this rule is adding tags that the BagIt specification says may not be repeated, such as the Payload-Oxum tag.</p>"},{"location":"users/jobs/packaging/","title":"Packaging","text":"<p>The packaging screen incudes the following options:</p> <ul> <li> <p>Package Format - Choose how you want your files to be packaged. The following options are available:</p> <ul> <li> <p>BagIt - Choose this if you want to bag your files in BagIt format.</p> </li> <li> <p>Tar - Choose this if you want to pack your files into a single tar file.</p> </li> </ul> </li> <li> <p>BagIt Profile - This option appears when you choose BagIt as the package format. Note that you can have structurally identical BagIt profiles with different sets of default values. See Creating BagIt Profiles for more information.</p> </li> <li> <p>Serialization - Choose whether you want the bag to be serialized to tar format. We expect to support additional options in the future, including zip, gzip and others.</p> </li> <li> <p>Package Name - Type the name of the package you want to create. DART will create a package with this file name. Note that some repositories, including APTrust<sup>*</sup>, have required naming conventions, and most discourage the use of non-printable characters in package names.</p> </li> <li> <p>Output Path - This is where DART will put the local copy of the package that it builds. Notice that this field is filled in automatically as you type the package name. Unless you have good reason, you should not manually edit this field.</p> </li> </ul> <p>Note: When packaging bags that should result in a tar file, make sure that the path in the Output Path field ends with \".tar\". DART should add this suffix automatically. If the \".tar\" file extension is removed, and a directory matching the name of Output Path happens to exist on your computer, DART will flag the bag as invalid in the job's validation stage. The error message will say that DART was expecting the bag to be a tar file but it found a directory instead.</p> <p></p> <p><sup>*</sup>APTrust bag names should begin with your organization identifier, followed by a dot and a unique name. For example, virginia.edu.photos-2019-07-21.</p>"},{"location":"users/jobs/run/","title":"Run Your Job","text":"<p>After defining the files your job will work with and the optional packaging, metadata, and upload steps, the Run page displays a summary of the work that DART will perform. Review the details to ensure that everything looks right, then click the Run button to run the job.</p> <p></p> <p>After clicking run, your job will begin. DART runs each job in a separate process, which provides a number of benefits:</p> <ol> <li>You can run many jobs at once.</li> <li>If any job encounters errors, it will not affect the other running jobs.</li> <li>You can continue to use DART while background jobs run. Nothing you do in DART, except quitting the application, will affect the running jobs.</li> </ol> <p>After clicking Run, you'll see the progress of each operation on screen. Striped blue bars indicate a work in progress. A green bar represents a completed operation, while a red bar indicates a failure. If a job includes multiple uploads, you'll see one progress bar for each upload.</p> <p>Note: Some members have issues using DART to upload large bags (400GB or larger) because of local networking infrastructure. If you encounter this, we recommend using DART to create bags and using a third-party S3 client (e.g., CyberDuck{:target=\"_blank\"}, S3 Browser{:target=\"_blank\"}) to upload them. </p> <p></p> <p>Large jobs may take a long time to complete. As long as jobs are running, you can continue to work in DART without affecting their progress. You'll see a badge like this in the upper right corner of the menu showing the number of running background jobs:</p> <p></p>"},{"location":"users/jobs/run/#progress-bar-accuracy","title":"Progress Bar Accuracy","text":"<p>The progress bars for packaging and validation are accurate to within a few seconds of actual operation time. The progress bar for uploads usually displays more progress than has actually been completed. This is because DART can know exactly how many bytes of an upload it has prepared to send, but not how many the upload target has received.</p> <p>The upload progress bar displays the number of bytes prepared, and will appear to stall at around 98% completion on large uploads, as it awaits transferral of the final chunk of data. In a 100 MB upload, that final chunk may include only 1 MB of data, taking a few seconds to transfer. In a 5 TB upload to S3, the final chunk can be 535 MB and can take many minutes to complete.</p>"},{"location":"users/jobs/run/#creating-a-workflow-from-a-job","title":"Creating a Workflow from a Job","text":"<p>If you've created a successful job that you want to be the pattern for future jobs, click the Create Workflow button to create a repeatable workflow that can run new files through the same set of steps that this job just completed.</p>"},{"location":"users/jobs/troubleshooting/","title":"Troubleshooting Jobs","text":"<p>Note: APTrust will be adding to this section as issues arise.</p>"},{"location":"users/jobs/troubleshooting/#uploading","title":"Uploading","text":""},{"location":"users/jobs/troubleshooting/#sftp","title":"SFTP","text":""},{"location":"users/jobs/troubleshooting/#bad-path-parent-not-exist","title":"Bad path: parent not exist","text":"<p>This can occur if the bucket name in your Storage Service record does not match the name of the upload folder on the sftp server. For example, if uploads should go into a folder on the server called <code>uploads</code>, but your StorageService has the bucket name <code>upload</code>, you'll see this error.</p> <p>See Storage Services for details on how to change Storage Service settings.</p>"},{"location":"users/jobs/troubleshooting/#upload-failed-due-to-unknown-error","title":"Upload failed due to unknown error.","text":"<p>This can occur when your local machine's SSH hosts file does not have the public key of the sftp server you are connecting to.</p> <p>You can fix this by manually connecting to the server with</p> <pre><code>local:~ yoozer$ ssh server.example.com\nThe authenticity of host 'server.example.com (::1)' can't be established.\nED25519 key fingerprint is SHA256:3WxPp9MParT+tsW/LpcNWR1m4c126aWIR98LVyEgfcw.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added 'localhost' (ED25519) to the list of known hosts.\nyoozer@server.example.com's password:\n</code></pre> <p>You can hit Control-C after the last prompt, since your ssh hosts file now has the key.</p>"},{"location":"users/jobs/upload/","title":"Uploads","text":"<p>You can specify one or more upload targets on the uploads page. Simply check the box beside each target you want to upload to.</p> <p>The list of available targets comes from the Storage Service settings in your local DART installation. You can add as many storage services as you like. To appear in the list of upload targets, a storage service must include a protocol, URL, login, and password, and it must have the Allows Upload set to Yes. If some of your storage services do not appear in the list, check to see they meet all of these criteria.</p> <p>Note: Some members have issues using DART to upload large bags (400GB or larger) because of local networking infrastructure. If you encounter this, we recommend using DART to create bags and using a third-party S3 client (e.g., CyberDuck{:target=\"_blank\"}, S3 Browser{:target=\"_blank\"}) to upload them. </p> <p></p>"},{"location":"users/jobs/validation/","title":"Validation Jobs","text":"<p>If you simply want to validate an existing bag, follow these steps:</p> <ol> <li> <p>Choose Jobs &gt; Validate a Bag from the menu.</p> </li> <li> <p>Choose the BagIt profile against which you want to validate. If you want to validate against the BagIt specification instead of a specific profile, choose the \"Empty Profile.\"</p> <p></p> </li> <li> <p>Choose whether you want to validate a tarred or untarred bag. As of version 2.0.4 (March, 2020), DART supports only tarred and unserialized bags (i.e. a bag that is a folder). We plan to support additional formats in the future.</p> </li> <li> <p>Click Browse to choose the folder or tar file you want to validate.</p> </li> <li> <p>Click Validate.</p> <p></p> </li> </ol> <p>The progress bar will show the progress of the job, and DART will display specific error messages below the progress bar when the job is complete.</p> <p>Note that a bag that is valid according to one profile may be invalid according to others. If a bag is valid according to the Empty Profile, it conforms to the general IETF BagIt specification.</p>"},{"location":"users/jobs/validation/#a-note-on-mac-os-dot-underscore-files","title":"A Note on Mac OS Dot-Underscore Files","text":"<p>DART may report a number of errors for tarred bags created on Mac OS, stating that .DS_Store files or files beginning with \"._\" were found in the payload but not in the manifests.</p> <p>Typically, there will be one dot-underscore file for each payload file, like so:</p> <ul> <li>data/article.pdf -&gt; data/._article.pdf</li> <li>data/image.jpg -&gt; data/._image.jpg</li> </ul> <p>These files contain metadata used by the Mac OS filesystem. When you tar a bag with the typical command, <code>tar -cf mybag.tar mybag</code>, Mac includes the dot-underscore files by default, but your bagging software may not include those hidden files in the manifests, so the DART validator considers the bags invalid, with messages like \"File data/._image.jpg found in data directory is not present in manifest-sha256.txt.\"</p> <p>When tarring your own bags outside of DART, you get around this problem with the command <code>COPYFILE_DISABLE=1 tar -cf mybag.tar mybag</code>. That tells Mac's tar program to exclude dot-underscore files from the tarball.</p>"},{"location":"users/settings/","title":"Settings","text":"<p>DART includes the following settings:</p> <p>App Settings include information such as your organization name (used when creating bags) and your default output directory (to which bags are written).</p> <p>Internal Settings are read-only settings that you may occasionally need to examine when tracing problems.</p> <p>Remote Repositories describe how to connect to remote preservation repositories that ingest the materials you upload.</p> <p>Storage Services describe how to connect to drop-off and pick up points, such as S3 buckets or FTP services. These are usually temporary storage points used to drop off materials for ingest or to pick up items restored by a preservation repository.</p> <p>You can also share settings with other users by importing and exporting them as in the video below.</p>"},{"location":"users/settings/app_settings/","title":"App Settings","text":"<p>App Settings contain DART's application-wide settings. These may be used when creating bags and other packages. To view the list of all settings, select Settings &gt; App Settings from the main menu.</p> <p></p>"},{"location":"users/settings/app_settings/#editing-app-settings","title":"Editing App Settings","text":"<p>Click on any setting in the list to edit it. Note that some essential settings, such as Bagging Directory and Institution Domain cannot be renamed or deleted, though their values can be changed.</p> <p></p>"},{"location":"users/settings/export/","title":"Exporting Settings","text":"<p>If you're setting up DART for a number of users, you may want to configure your local DART installation, then export your settings for others to use. For example, you can set up a BagIt Profile, application settings, remote repositories and storage services for your institution, then publish them to a URL for others to install via DART's import feature.</p> <p>DART Does Not Export Credentials</p> <p>When you export StorageService and RemoteRepository records, DART will not export login and password fields, unless they begin with \"env:\", which indicates the logins/passwords are to be loaded from the environment.</p> <p>You may still export these records, but you will then have to pass login and password information through another channel, such as phone, email, or PrivNote.</p> <p>Also note that if you export StorageService and RemoteRepository records and then import them back into your own DART installation, you may overwrite the records' existing login and password info with blank data.</p> <p>To export settings from DART:</p> <ol> <li>Choose Settings &gt; Export Settings from the main menu.</li> <li>Check the boxes next to the settings you want to export.</li> <li>Click Export.</li> </ol> <p></p> <p>After exporting your settings, click Copy to Clipboard to copy them.</p> <p></p> <p>You can then post the settings to a public URL, or email them to other users for import.</p>"},{"location":"users/settings/export/#export-questions","title":"Export Questions","text":"<p>If you are exporting settings for a number of other users, you may want to add questions to your export, to help walk users through the setup process.</p> <p>Because settings are meant to be published and shared, DART does not export login names and passwords. You should pass those by phone, PrivNote, or some other secure channel.</p> <p>You can define questions that will prompt the user for that information and DART will copy the user's response to the setting and field you define. For example, you can ask a user to enter their SFTP password and tell DART to copy into the connection settings for your SFTP server.</p> <p>DART can also copy values into the default value fields of BagIt profile tags. For example, if your BagIt profile includes an \"Internal-Department\" tag, user can enter their department name in response to a question and have the response become the default value for all bags they produce.</p> <p>To define setup questions:</p> <ol> <li>Check the box next to Add questions to help users import these settings.</li> <li>Click the Add Question button on the bottom of the Settings Export screen.     </li> <li>Type in your question. For example, \"What is your password for the sftp server?\"</li> <li>Tell DART to copy the user's response into the password field of the Storage Service called \"SFTP demo server\".</li> </ol> <p></p> <p>DART will present these questions to users when they import your settings. For more info, see importing settings.</p>"},{"location":"users/settings/import/","title":"Importing Settings","text":"<p>You can import settings into DART from a URL or by copying and pasting data. DART's data import feature helps organizations configure and distribute basic settings for their users.</p> <p>DART Does Not Export Credentials</p> <p>By default, DART will not export login and password fields. When sharing settings, DART's import feature will pull in most of the data you need. However, you will have to get login and password information through another channel, such as phone, email, or PrivNote.</p> <p>To import settings, follow these steps:</p> <ol> <li>Choose Settings &gt; Import Settings from the menu.</li> <li>Choose whether to import settings from a URL or from copy-and-paste text.<ul> <li>If you choose URL, enter the URL in the text box. </li> <li>If you choose \"Import from JSON\", paste the JSON into the text area. </li> </ul> </li> <li>Click Import.</li> </ol> <p>When the import is complete, DART shows a list of the imported settings, and an optional set of questions. You should answer the questions to complete the setup. DART will copy your answers to the correct settings.</p> <p></p>"},{"location":"users/settings/internal_settings/","title":"Internal Settings","text":"<p>Internal Settings contain configuration information that users cannot edit. These settings are created by plugins, settings imports, and software updates. Though you cannot change them, knowing their values may be helpful to DART users and developers.</p> <p></p>"},{"location":"users/settings/plugins/","title":"Plugins","text":"<p>DART plugins provide features such as the following:</p> <ul> <li> <p>Format Reader - Allows DART to read files packaged in a certain format, such as tar.</p> </li> <li> <p>Format Writer - Allows DART to write files into specific formats, such as tar.</p> </li> <li> <p>Network Client - Allows DART to communicate via certain network protocols, such as S3, so that it can upload and/or download files.</p> </li> <li> <p>Repository - Allows DART to communicate with remote repositories to retrieve information such as a list of ingested objects.</p> </li> </ul> <p>To see the list of plugins installed on your system, choose Settings &gt; Plugins from the menu. You should see a list like this:</p> <p></p> <p>See also: Plugins documentation for developers</p>"},{"location":"users/settings/remote_repositories/","title":"Remote Repositories","text":"<p>Remote repositories are services to which you upload data for preservation. DART can query remote repositories to show the status of items you've uploaded for ingest, provided the following three conditions are met:</p> <ul> <li>The remote repository has a REST API. Most do, including APTrust, Fedora, DSpace, and many others.</li> <li>DART has a plugin that knows how to talk to the repository. (On initial release, the only plugin is for APTrust, but more may be coming.)</li> <li>You have a Remote Repository setting that points to the correct URL and contains valid login credentials.</li> </ul>"},{"location":"users/settings/remote_repositories/#listing-remote-repositories","title":"Listing Remote Repositories","text":"<p>To view the list of Remote Repository settings, choose Settings &gt; Remote Repositories from the menu.</p> <p></p>"},{"location":"users/settings/remote_repositories/#editing-remote-repositories","title":"Editing Remote Repositories","text":"<p>Click on any repository in the list to edit it, or click the New button to create a new one.</p> <p></p>"},{"location":"users/settings/remote_repositories/#description-of-settings","title":"Description of Settings","text":""},{"location":"users/settings/remote_repositories/#name","title":"Name","text":"<p>The name of the remote repository. This is required. It can be anything you want, and chaning it will not affect the behavior or availability of the repository.</p>"},{"location":"users/settings/remote_repositories/#url","title":"URL","text":"<p>The base URL of the repository's REST API. This may or may not include path information. For example, <code>https://example.com</code> has no path information, while <code>https://example.com/api/v2/</code> does include path info. Check with your repository to get the correct URL.</p>"},{"location":"users/settings/remote_repositories/#plugin","title":"Plugin","text":"<p>Choose the plugin that can connect to your repository. If you don't see the plugin in the list, it has not been installed. Note that at the time of DART's initial release, the only available plugin is <code>APTrustClient</code>.</p>"},{"location":"users/settings/remote_repositories/#user-id","title":"User ID","text":"<p>Enter the user ID you use to connect to the repository's REST API. If the API only uses a token and no user ID, leave this blank.</p>"},{"location":"users/settings/remote_repositories/#api-token","title":"API Token","text":"<p>Enter the API token used to connect to this repository. You'll have to get a token from the repository itself.</p>"},{"location":"users/settings/remote_repositories/#login-extra","title":"Login Extra","text":"<p>This field is generally left blank. If your repository uses it, they should provide instructions on how to fill this in.</p>"},{"location":"users/settings/storage_services/","title":"Storage Services","text":"<p>Storage services are not repositories! They are pickup and drop-off points for materials going into or coming out of repositories. Some repositories ask depositors to upload materials into an S3 bucket or an SFTP folder for ingest, and restore materials to a similar bucket or folder for depositors to retrieve.</p> <p>Storage services allow DART to connect to these pickup and drop-off points. Note, however, that you're free to send data to and from these storage services even if they're not ultimately bound for a preservation repository.</p>"},{"location":"users/settings/storage_services/#listing-storage-services","title":"Listing Storage Services","text":"<p>To list all storage services, choose Settings &gt; Storage Services from the menu.</p> <p></p>"},{"location":"users/settings/storage_services/#editing-storage-services","title":"Editing Storage Services","text":"<p>Click any storage service in the list to edit it.</p> <p></p>"},{"location":"users/settings/storage_services/#description-of-settings","title":"Description of Settings","text":""},{"location":"users/settings/storage_services/#name","title":"Name","text":"<p>The name of the service. Choose a name that's meaningful to you and that differentiates this service from others. You can change the name at any time without affecting the behavior or availability of the service.</p>"},{"location":"users/settings/storage_services/#description","title":"Description","text":"<p>A description of this service.</p>"},{"location":"users/settings/storage_services/#protocol","title":"Protocol","text":"<p>Choose the network protocol used to communicate with this service. Note: At launch, DART supports only the S3 protocol.</p>"},{"location":"users/settings/storage_services/#host","title":"Host","text":"<p>Enter the name or IP address of the service host. Do not include protocol prefixes like <code>https://</code> or <code>ftp://</code>. For example, the host name for Amazon's S3 service is <code>s3.amazonaws.com</code>. A locally hosted service may be <code>s3.example.com</code> or <code>ftp.example.com</code>. You can also enter an IP address here such as <code>127.0.0.1</code>.</p>"},{"location":"users/settings/storage_services/#port","title":"Port","text":"<p>The port to connect to. In most cases, you'll want to leave this at 0 (zero). Set this only if the service is running on a non-standard port number.</p>"},{"location":"users/settings/storage_services/#bucket","title":"Bucket","text":"<p>The name of the bucket you'll be uploading into or downloading from on the remote host. For the S3 protocol, this will be a bucket name like <code>aptrust.dart.test</code>. (If you are an APTrust member, your bucket name will be aptrust.receiving.test. for the demo system and aptrust.receiving. for the production system. For example, receiving buckets for the University of Virginia would be aptrust.test.receiving.virginia.edu for demo and aptrust.receiving.virginia.edu for production.) <p>For protocols like FTP and rsync, this Bucket setting should be a directory name like <code>uploads/ingest/</code> or <code>downloads/restore</code>.</p>"},{"location":"users/settings/storage_services/#allows-upload","title":"Allows Upload","text":"<p>Choose Yes if this service allows you to upload files, No otherwise.</p> <p>Info</p> <p>This setting is important. When you run a job, DART gives you a choice of storage services to which to send your files. DART will show only those services where <code>Allows Upload</code> is set to Yes.</p>"},{"location":"users/settings/storage_services/#allows-download","title":"Allows Download","text":"<p>Choose Yes if this service allows you to download files, No otherwise.</p> <p>Info</p> <p>While DART does not support downloads in its initial release, it may support them in a future release.</p>"},{"location":"users/settings/storage_services/#login","title":"Login","text":"<p>Enter your login name for the service. For FTP and rsync services, this will typically be a user name. For S3 services, it will be an access key ID.</p> <p>For S3 services, you may want to keep your access keys in an environment variable. If you choose to do so, you can enter <code>env:</code> followed by the name of the environment variable here and DART will pull the setting from the environment at run time.</p> <p>For example, if you keep your AWS access key id in an environment variable called AWS_ACCESS_KEY_ID, then enter <code>env:AWS_ACCESS_KEY_ID</code>.</p> <p>Info</p> <p>Environment variables beginning with env: work only when you launch DART from the command line. They don't work when you launch by clicking the DART icon.</p>"},{"location":"users/settings/storage_services/#password","title":"Password","text":"<p>Enter your password for the service. For FTP and rsync services, this will typically be an actual passowrd. For S3 services, it will be a secret access key. As with the Login field above, you can set this to reference an environment variable using the <code>env:</code> pattern. For example, <code>env:AWS_SECRET_ACCESS_KEY</code>.</p>"},{"location":"users/settings/storage_services/#login-extra","title":"Login Extra","text":"<p>This field is typically not used. If your storage service requires it, the plugin documentation should describe what to enter here. Otherwise, leave this field blank.</p>"},{"location":"users/workflows/","title":"Workflows","text":"<p>A workflow is a set of packaging, validation, and/or upload operations that you define as a template to be run on any sets of files you choose.</p> <p>Workflows ensure that the exact same set of steps is run on each set of files. DART can run workflows from the UI and from the command line, which means you can create scripts that use workflows to package and upload materials.</p> <p>Note</p> <p>DART won't run on servers that don't have graphics because DART's underlying Electron framework insists on graphics capabilities even when running in command-line mode.</p> <p>DART Runner does run on servers. For more info, see the DART Runner page.</p>"},{"location":"users/workflows/#defining-a-workflow","title":"Defining a Workflow","text":"<p>DART provides two ways to define a workflow: from a job or from scratch.</p>"},{"location":"users/workflows/#creating-a-workflow-from-a-job","title":"Creating a Workflow from a Job","text":"<p>The easiest way to create a workflow is to first create a job that includes all of the operations you want to include, run the job to ensure it works, then click the Create Workflow button on the Review and Run screen.</p>"},{"location":"users/workflows/#creating-a-workflow-from-scratch","title":"Creating a Workflow from Scratch","text":"<p>To create a workflow from scratch:</p> <ol> <li> <p>Choose Workflows &gt; New from the menu.</p> </li> <li> <p>Fill in the details.</p> <ol> <li> <p>The Name is required and should describe what the workflow will do. This name will appear on the Workflow menu, and scripted tasks will use this name to reference the workflow. (See #2 under Tips for Workflows below.)</p> </li> <li> <p>The Description is for your internal use.</p> </li> <li> <p>Choose the Package Format that suits your needs.</p> </li> <li> <p>If you chose BagIt as the Package Format, choose which BagIt Profile you want to use to build the bag. (See #1 under Tips for Workflows below.)</p> </li> <li> <p>Choose the destination to which you want to upload the packaged files. Note that only Storage Services where Allows Upload is set to Yes will appear in the Upload To list.</p> </li> <li> <p>Click Save, and remember that you can edit or delete this workflow later.</p> </li> </ol> </li> </ol> <p></p>"},{"location":"users/workflows/#tips-for-workflows","title":"Tips for Workflows","text":"<ol> <li> <p>Use customized BagIt profiles. DART lets you clone the base version of a BagIt profile and then add your own tag default values, so that you don't have to re-enter those values each time you create a new bag. For example, most BagIt profiles require a value for the Source-Organization tag, and typically, this value will be the same for every bag you create. Most profiles also require a number of other tags that may rarely or never change from bag to bag. For example, most depositors will set the same Access and Storage-Option values for 99% of the bags they upload to APTrust. Including in your workflow a custom BagIt profile with pre-set default values will save you having to re-enter common tag values, while still allowing you to override them when necessary.</p> </li> <li> <p>Use meaningful names for your workflows. Many repositories include both a staging environment and a production environment. You may create workflows that are identical except that one pushes packages into the staging environment while the other pushes to production. DART lets you run workflows directly from the workflow menu. Meaningful names help uses choose the right workflow and understand what the consequences of the actions they are about to take.</p> </li> </ol> <p></p>"},{"location":"users/workflows/#exporting-a-workflow","title":"Exporting a Workflow","text":"<p>You can export DART workflows to run on a server using dart-runner. To export a workflow:</p> <ol> <li>Choose Workflows &gt; List from the DART menu.</li> <li>Click on the workflow you want to export.</li> <li>Click the blue Export button near the top right of the Workflow page.</li> </ol> <p>Note</p> <p>You may see a warning about unencrypted passwords included in the export. You can ignore this if you're copying the workflow directly to a server you trust. However, you should use environment variables instead of embedded, plain-text passwords when sending workflows to others via insecure networks. See Storage Service passwords for info on how to use environment variables.</p> <p>After clicking Export, click Copy to Clipboard to copy the JSON.</p> <p></p>"},{"location":"users/workflows/batch_jobs/","title":"Batch Jobs","text":"<p>Batch jobs allow you to define a series of jobs in a spreadsheet and then run all of the jobs through the same workflow. Note that a workflow typically includes a BagIt profile, often with default tag values already filled in, and one or more upload targets.</p> <p>When you run a batch of jobs through a workflow, all steps of that workflow are applied to every item in the batch. For example, that could mean bagging up 1000 directories using the APTrust BagIt profile and sending them all to APTrust's demo or production environment.</p> <p>Batch jobs are not limited to APTrust. Your bags can conform to any BagIt profile and be uploaded to any SFTP or S3-compliant server.</p>"},{"location":"users/workflows/batch_jobs/#batch-spreadsheet-requirements","title":"Batch Spreadsheet Requirements","text":"<p>Your spreadsheet must meet the following requirements:</p> <ol> <li>The first line must contain column names.</li> <li>The sheet must contain the following columns:<ul> <li>Bag-Name - The name of the bag you wish to create.</li> <li>Root-Directory - The absolute path to the directory containing the files   you want to bag.</li> </ul> </li> <li>You must include one column for each required tag in tag in your workflow's    BagIt profile. The column header for each tag must be in the format    <code>tag_file_name.txt/tag-name</code>. For example, <code>bag-info.txt/Source-Organization</code>,    or <code>aptrust-info.txt/Storage-Option</code>.</li> <li>Your file may omit tags whose default values are already defined in your BagIt    profile. (See Customizing a Tag for    more info on how to set default tag values in your bagging profiles.)</li> <li>Your file may include extra tags not defined in your workflow's BagIt    profile. For example, if you include a column named <code>bag-info.txt/Custom-Tag</code>,    DART will add the tag <code>Custom-Tag</code> to the <code>bag-info.txt</code> file of each bag,    along with the value specified in that bag's row. Adding    <code>custom-tag-file.txt/My-Tag</code> will cause DART to create a tag file for each    bag called <code>custom-tag-file.txt</code> and add <code>My-Tag</code> to it, along with the    appropriate value.</li> <li>You must save your spreadsheet as a CSV (comma separated value) file so    DART can read it. Both Microsoft Excel and Google Sheets can export to CSV    format.</li> </ol>"},{"location":"users/workflows/batch_jobs/#example-spreadsheet","title":"Example Spreadsheet","text":"<p>The sample spreadsheet below defines a batch job to bag up DART source files. Note that it includes definitions for tags required by the APTrust BagIt profile, including the Source-Organization tag in bag-info.txt and the Title, Description, Access, and Storage-Option tags in aptrust-info.txt.</p> <p>Use the right and left arrow keys to scroll sideways in the sheet. You'll see a custom tag at the end called <code>bag-info.txt/Custom-Tag</code>. This tag is not defined in any BagIt profile, but DART will add it to all the bags in the batch and the bag will still be valid because BagIt profiles define only what must be present and do not prohibit what may be present.</p>"},{"location":"users/workflows/batch_jobs/#running-a-batch-job","title":"Running a Batch Job","text":"<p>1. Choose Run Batch from the Workflows menu.</p> <p></p> <p>2. Select a Workflow from the list and choose a CSV file. The image below shows the <code>Send to Staging</code> workflow and the CSV file <code>/Users/apd4n/Desktop/test_batch.csv</code>.</p> <p></p> <p>3. Click the Run button. DART will show the progress of each job as it runs, and will show the outcome of each job as it completes. In the image below, all nine jobs completed successfully.</p> <p></p>"},{"location":"users/workflows/batch_jobs/#notes-on-batch-jobs","title":"Notes on Batch Jobs","text":"<ol> <li>DART runs each job in a batch as a separate process.</li> <li>DART runs jobs one at a time because bagging involves a lot of disk reads    and writes.</li> <li>If you try to run a job with an invalid workflow, or your CSV file points    to directories and files that don't exist, DART will display the errors    and will not run the batch.</li> <li>Individual jobs within the batch may fail. The most common reason for failure    is lack of file permissions on one or more files to be bagged. If a job fails,    DART will display the reason for failure and will continue running the other    jobs in the batch.</li> <li>You must stay on the Workflow Batch screen until all jobs in the batch are    complete. If you navigate away from that screen, DART will complete the    currently-running job but will not run the remaning jobs in the CSV file.</li> </ol>"},{"location":"users/workflows/batch_jobs/#common-problems","title":"Common Problems","text":"<ol> <li> <p>DART complains about missing or empty values in the CSV file.</p> <p>First, make sure the values are actually present in the file.</p> <p>Excel sometimes exports a number of empty rows at the end of a CSV file. If DART complains about missing values, open the CSV file in a text editor and delete the empty rows. These often appear as lines containing nothing but commas.</p> </li> <li> <p>DART says required tag values are missing, but they appear to be in the    CSV file.</p> <p>Make sure the column headers are correct. A common error is to have headers like <code>bag-info/Source-Organization</code> instead of <code>bag-info.txt/Source-Organization</code>. The <code>.txt</code> is required to match the tag from the CSV file to the tag in your workflow's BagIt profile. You should also ensure that capitalization and hyphenation match.</p> </li> <li> <p>DART says a job failed because of <code>EACCESS Cannot read &lt;some file&gt;</code>.</p> <p>Check the file permissions on the file DART complained about. Although you may have read permissions on most of the files you're trying to bag, you may be lacking permissions on one or two. That's enough to cause the job to fail. If you're bagging files from a shared network drive, you may have to ask a system administrator for help in setting file permissions.</p> </li> </ol> <p>Note</p> <p>Batch jobs are new in DART 2.0.9 (released July 24, 2020). If you find bugs, please report them to the DART GitHub repostory or to help@aptrust.org.</p>"},{"location":"users/workflows/job_params/","title":"Job Params","text":"<p>The JobParams object is a simple JSON structure that gives a DART command-line job four essential pieces of information it needs to run a job. These are:</p> <ul> <li>workflowName - The name of the workflow to run.</li> <li>packageName - The name of the package to create.</li> <li>files - A list of files and/or directories to put into the package and/or   upload to a remote server. If the workflow includes one or more upload operations   but no packaging operation, the files will be uploaded directly.</li> <li>tags - A list of tag names and values to add to the package.</li> </ul> <p>Below is sample JobParams JSON describing which files should be passed through the \"APTrust Demo System Workflow\" and what tag values should be applied. In this case, two directories and one file will be packaged with four custom-defined tags.</p> <pre><code> {\n    \"workflowName\": \"APTrust Demo System Workflow\",\n    \"packageName\": \"test.edu.my_files.tar\",\n    \"files\": [\n        \"/path/to/first/directory\",\n        \"/path/to/second/directory\",\n        \"/path/to/some/document.pdf\"\n    ],\n    \"tags\": [\n        {\n            \"tagFile\": \"bag-info.txt\",\n            \"tagName\": \"Bag-Group-Identifier\",\n            \"userValue\": \"Photos_2019\"\n        },\n        {\n            \"tagFile\": \"aptrust-info.txt\",\n            \"tagName\": \"Title\",\n            \"userValue\": \"Photos from 2019\"\n        },\n        {\n            \"tagFile\": \"aptrust-info.txt\",\n            \"tagName\": \"Description\",\n            \"userValue\": \"What I did with my summer vacation.\"\n        },\n        {\n            \"tagFile\": \"custom/legal-info.txt\",\n            \"tagName\": \"License\",\n            \"userValue\": \"https://creativecommons.org/publicdomain/zero/1.0/\"\n        }\n    ]\n }\n</code></pre> <p>Let's assume the hypothetical \"APTrust Demo System Workflow\" includes the following steps:</p> <ul> <li>Package all files according to our customized version of the APTrust BagIt profile.</li> <li>Validate the resulting bag.</li> <li>Upload the bag to our ingest bucket for the APTrust Demo system.</li> <li>Upload the bag to the S3 bucket in our local owncloud S3 service.</li> </ul> <p>Passing the JSON above to the DART command line application will result in the following:</p> <ul> <li> <p>The file <code>/path/to/some/document.pdf</code> and the contents of the directories <code>/path/to/first/directory</code> and <code>/path/to/second/directory</code> will be packed into the data directory of a new BagIt bag.</p> </li> <li> <p>DART will create and populate all of the tag files required by the APTrust BagIt profile. It will use the default values saved in your locally customized version of the profile where possible, overriding the defaults with the bag-specific values supplied in the JSON.</p> <p>Note</p> <p>Note that certain BagIt tag values, such as Source-Organization, Contact-Email, etc. will not change from bag to bag, so it makes sense to set default values for them in your customized profile. Other values, such as bag title and description, will change for every bag, so it makes sense to set them in the JobParams JSON.</p> </li> <li> <p>DART will save the entire package to a file whose name matches the package name. DART will write the file into your bagging directory, which is usually a directory called <code>.dart</code> under your home directory. You can verify (and change) the name of your bagging directory by choosing App Settings from the DART menu and clicking on the setting called Bagging Directory.</p> </li> <li> <p>DART will verify the bag according to the APTrust BagIt profile (or whichever profile the Workflow specified).</p> </li> <li> <p>DART will upload the verified bag to APTrust's S3 ingest bucket.</p> </li> <li> <p>DART will upload the verified bag to your local ownCloud S3 bucket.</p> </li> </ul> <p>See also: Workflows, Command Line Reference, Scripting with DART</p>"},{"location":"users/workflows/job_params/#further-reading","title":"Further Reading","text":"<p>You'll find more detailed developer documentation for the JobParams object in our DART API documentation.</p>"}]}