



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Job Flow - DART Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#job-flow" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="DART Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              DART Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Job Flow
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/APTrust/dart/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="DART Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    DART Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/APTrust/dart/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      For Users
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        For Users
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/getting_started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Jobs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Jobs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/jobs/" title="Jobs" class="md-nav__link">
      Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/jobs/list/" title="Listing Jobs" class="md-nav__link">
      Listing Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/jobs/files/" title="Adding Files" class="md-nav__link">
      Adding Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/jobs/packaging/" title="Packaging" class="md-nav__link">
      Packaging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/jobs/metadata/" title="Metadata" class="md-nav__link">
      Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/jobs/upload/" title="Uploads" class="md-nav__link">
      Uploads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/jobs/run/" title="Run Your Job" class="md-nav__link">
      Run Your Job
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/jobs/delete/" title="Deleting Jobs" class="md-nav__link">
      Deleting Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/jobs/validation/" title="Validation Jobs" class="md-nav__link">
      Validation Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/jobs/troubleshooting/" title="Troubleshooting Jobs" class="md-nav__link">
      Troubleshooting Jobs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Workflows
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Workflows
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/workflows/" title="Workflows" class="md-nav__link">
      Workflows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/workflows/job_params/" title="Job Params" class="md-nav__link">
      Job Params
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/workflows/batch_jobs/" title="Batch Jobs" class="md-nav__link">
      Batch Jobs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Settings
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Settings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/settings/app_settings/" title="App Settings" class="md-nav__link">
      App Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/settings/internal_settings/" title="Internal Settings" class="md-nav__link">
      Internal Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/settings/remote_repositories/" title="Remote Repositories" class="md-nav__link">
      Remote Repositories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/settings/storage_services/" title="Storage Services" class="md-nav__link">
      Storage Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/settings/plugins/" title="Plugins" class="md-nav__link">
      Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/settings/export/" title="Exporting Settings" class="md-nav__link">
      Exporting Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/settings/import/" title="Importing Settings" class="md-nav__link">
      Importing Settings
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/dashboard/" title="Dashboard" class="md-nav__link">
      Dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      BagIt Profiles
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        BagIt Profiles
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/bagit/" title="BagIt Profiles" class="md-nav__link">
      BagIt Profiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/bagit/importing/" title="Importing Profiles" class="md-nav__link">
      Importing Profiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/bagit/exporting/" title="Exporting Profiles" class="md-nav__link">
      Exporting Profiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/bagit/creating/" title="Creating Profiles" class="md-nav__link">
      Creating Profiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/bagit/customizing/" title="Customizing Profiles" class="md-nav__link">
      Customizing Profiles
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/command_line/" title="Command Line Reference" class="md-nav__link">
      Command Line Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/scripting/" title="Scripting with DART" class="md-nav__link">
      Scripting with DART
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../users/logs/" title="Logs" class="md-nav__link">
      Logs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      For Developers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        For Developers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Developer's Guide to DART" class="md-nav__link">
      Developer's Guide to DART
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data_storage/" title="Data Storage" class="md-nav__link">
      Data Storage
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Job Flow
      </label>
    
    <a href="./" title="Job Flow" class="md-nav__link md-nav__link--active">
      Job Flow
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-jobrunner-step-by-step" title="The JobRunner, Step by Step" class="md-nav__link">
    The JobRunner, Step by Step
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../building/" title="Building" class="md-nav__link">
      Building
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../documenting/" title="Documenting" class="md-nav__link">
      Documenting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-9" type="checkbox" id="nav-3-9">
    
    <label class="md-nav__link" for="nav-3-9">
      Plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-9">
        Plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins/" title="Plugins" class="md-nav__link">
      Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins/manager/" title="Plugin Manager" class="md-nav__link">
      Plugin Manager
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins/format_readers/" title="Format Readers" class="md-nav__link">
      Format Readers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins/format_writers/" title="Format Writers" class="md-nav__link">
      Format Writers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins/network_clients/" title="Network Clients" class="md-nav__link">
      Network Clients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins/repo_clients/" title="Repository Clients" class="md-nav__link">
      Repository Clients
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-jobrunner-step-by-step" title="The JobRunner, Step by Step" class="md-nav__link">
    The JobRunner, Step by Step
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/APTrust/dart/edit/master/docs/developers/job_flow.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="job-flow">Job Flow</h1>
<p>All DART jobs are run as individual processes. When you run a job from the DART UI, the application forks a child process and runs the job in that process. The code that forks the child is in the run method of the <a href="https://github.com/APTrust/dart/blob/master/ui/controllers/job_run_controller.js">JobRunController</a>, which is <a href="https://aptrust.github.io/dart/JobRunController.html">documented here</a>.</p>
<p>Forking child processes has a number of advantages over running jobs in the same process as the UI.</p>
<ul>
<li>You can run multiple jobs simultaneously.</li>
<li>You can continue to use the UI while jobs run.</li>
<li>A crashed job will not crash the UI.</li>
</ul>
<p>The downside of running jobs in child processes is that if you close the DART application, you kill all of the running jobs. This is why DART always displays a badge in the upper right corner when jobs are running.</p>
<p><img alt="Running jobs badge" src="../../img/common/running_jobs_badge.png" /></p>
<p>All DART jobs, whether run from the UI or from the command line, are launched from the run() method of <a href="https://github.com/APTrust/dart/blob/master/main.js">main.js</a>, which does the following:</p>
<ol>
<li>
<p>Calls the <a href="https://aptrust.github.io/dart/JobLoader.html">JobLoader</a> to load the job.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The JobLoader figures out whether you're passing in a Job object or
some other type of object from which it can construct a job. You'll
typically pass in JSON representing a lightweight
<a href="https://aptrust.github.io/dart/JobParams.html">JobParams</a> object
and the JobLoader will construct the job from that. The JobParams
object simply names a set of files, a <a href="../../users/workflows/">Workflow</a>
to pass them through, and a set of metadata tags to add to the package.
The <a href="../../users/workflows/job_params/">user documentaiton for JobParams</a>
will be helpful to developers.</p>
</div>
</li>
<li>
<p>Passes the <a href="https://aptrust.github.io/dart/Job.html">Job</a> object to the <a href="https://aptrust.github.io/dart/JobRunner.html">JobRunner</a> and then calls the JobRunner's run method.</p>
</li>
<li>
<p>Returns the exit code so that the script or application that launched the job can know whether it succeeded. An exit code of zero indicates success. Any other code indicates failure. These codes are spelled out in <a href="https://github.com/APTrust/dart/blob/master/core/constants.js">core/constants.js</a> as follows:</p>
</li>
</ol>
<div class="codehilite"><pre><span></span>    <span class="cm">/**</span>
<span class="cm">     * This exit code indicates a process completed successfully,</span>
<span class="cm">     * with no errors.</span>
<span class="cm">     *</span>
<span class="cm">     * @type {number}</span>
<span class="cm">     */</span>
    <span class="nx">EXIT_SUCCESS</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="cm">/**</span>
<span class="cm">     * This exit code indicates a process ran to completion, but one</span>
<span class="cm">     * or more errors occurred along the way.</span>
<span class="cm">     *</span>
<span class="cm">     * @type {number}</span>
<span class="cm">     */</span>
    <span class="nx">EXIT_COMPLETED_WITH_ERRORS</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="cm">/**</span>
<span class="cm">     * This exit code indicates a process did not complete</span>
<span class="cm">     * due to invalid parameters.</span>
<span class="cm">     *</span>
<span class="cm">     * @type {number}</span>
<span class="cm">     */</span>
    <span class="nx">EXIT_INVALID_PARAMS</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="cm">/**</span>
<span class="cm">     * This exit code indicates that the process did not complete</span>
<span class="cm">     * due to an unexpected runtime error.</span>
<span class="cm">     *</span>
<span class="cm">     * @type {number}</span>
<span class="cm">     */</span>
     <span class="nx">EXIT_RUNTIME_ERROR</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</pre></div>


<h2 id="the-jobrunner-step-by-step">The JobRunner, Step by Step</h2>
<p>The <a href="https://aptrust.github.io/dart/JobRunner.html">JobRunner</a> does the following:</p>
<ol>
<li>
<p>If the Job includes a <a href="https://aptrust.github.io/dart/PackageOperation.html">PackageOperation</a>, the JobRunner packages the files specified in the operation. The PackageOperation describes how DART should create a bag, or a tar file, or a zip file, or some other package. If a user wants to upload files without packaging, there will be no PackageOperation.</p>
</li>
<li>
<p>If the PackageOperation produced a BagIt bag (tarred or not), DART validates the bag. The JobRunner will create a <a href="https://aptrust.github.io/dart/ValidationOperation.html">ValidationOperation</a> to describe what needs to be validated and how.</p>
</li>
<li>
<p>If the job includes any <a href="https://aptrust.github.io/dart/UploadOperation.html">UploadOperations</a>, DART will execute them one at a time, in sequence.</p>
</li>
<li>
<p>The JobRunner sets and returns the appropriate exit code. (Note that the most common cause of the EXIT_COMPLETED_WITH_ERRORS code is a job whose packaging and validation succeeded, along with some but not all of the upload operations.)</p>
</li>
</ol>
<p>The JobRunner logs its work, and you can watch the operations unfold in the <a href="../logging/">logs</a>.</p>
<p>Each of the objects <a href="https://aptrust.github.io/dart/PackageOperation.html">PackageOperation</a>, <a href="https://aptrust.github.io/dart/ValidationOperation.html">ValidationOperation</a>, and <a href="https://aptrust.github.io/dart/UploadOperation.html">UploadOperation</a> include an <a href="https://aptrust.github.io/dart/OperationResult.html">OperationResult</a> object.</p>
<p>After a job is complete, each of the operations and their results are stored with the job record in the DART's jobs database, which is a plain text JSON file. You can open the file directly to examine the full state of the object. See <a href="../data_storage/">Data Storage</a> for more information.</p>
<p>All of the code for running jobs lives in the <a href="https://github.com/APTrust/dart/tree/master/workers">workers</a> folder of the DART source. The four key files have the following tasks:</p>
<ul>
<li>
<p>workers/job_runner.js orchestrates the work of bagging, validating, and uploading. Links: <a href="https://github.com/APTrust/dart/blob/master/workers/job_runner.js">source code</a>, <a href="https://aptrust.github.io/dart/JobRunner.html">documentation</a>, <a href="https://github.com/APTrust/dart/blob/master/workers/job_runner.test.js">tests</a>.</p>
</li>
<li>
<p>workers/bag_creator.js creates bags for the PackageOperation step of the job. Links: <a href="https://github.com/APTrust/dart/blob/master/workers/job_runner.test.js">source code</a>, <a href="https://aptrust.github.io/dart/BagCreator.html">documentation</a>, <a href="https://github.com/APTrust/dart/blob/master/workers/bag_creator.test.js">tests</a>.</p>
</li>
<li>
<p>workers/bag_validator.js validates that a bag is complete and conforms to a specified BagIt profile. Links: <a href="https://github.com/APTrust/dart/blob/master/workers/bag_validator.js">source</a>, <a href="https://aptrust.github.io/dart/BagValidator.html">documentation</a>, <a href="https://github.com/APTrust/dart/blob/master/workers/bag_validator.test.js">tests</a>.</p>
</li>
<li>
<p>workers/uploader.js uploads files to a remote upload target. Links: <a href="https://github.com/APTrust/dart/blob/master/workers/uploader.js">source</a>, <a href="https://aptrust.github.io/dart/Uploader.html">documentation</a>, <a href="https://github.com/APTrust/dart/blob/master/workers/uploader.test.js">tests</a>.</p>
</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../data_storage/" title="Data Storage" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Data Storage
              </span>
            </div>
          </a>
        
        
          <a href="../building/" title="Building" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Building
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>